/*! For license information please see sorting-index.js.LICENSE */
(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{242:function(e,t,a){"use strict";a.r(t);var r,n,s,i=a(251),o=a.n(i),c=a(268),d=a.n(c),l=a(259),p={},h=a(31),u=a(32),g=a(254),m=a(252),f=a(253),v=a(255),C=a(275),b={},y=function(e){return Object(C.b)(b,e)},k=a(279),I=a(266),D=a(260),x=a(592),O=a.n(x),S=a(68),_=a(261),j=a(66),R=a(256),w=a(257),E=a.n(w),T=a(274),N=a.n(T),P=a(258),H=a(291),A=a(340),M=a.n(A),B=a(265),F=Object(_.a)("CardDeck")((s=n=function(e){function t(){var e;return Object(h.a)(this,t),(e=Object(g.a)(this,Object(m.a)(t).call(this))).topOpenedCard=o.a.createRef(),e.state={prev:null,prevID:null,prevText:null,animation:"",stage:0},e}return Object(f.a)(t,e),Object(u.a)(t,[{key:"drawDeck",value:function(){for(var e=this,a=this.props,r=a.totalCards,n=a.next,s=a.nextID,i=a.nextText,c=a.tabIndex,d=a.activityId,l=this.state,p=l.stage,h=l.animation,u=this.locale,g=u.visibleOutOf,m=u.commonDeck,f=u.cardsCount,v=u.outof,C=r,b=[],y=function(a){var l=a===C-p-1,u=l&&h,y=a>t.MaxCardsCapasity-1?t.MaxCardsCapasity-1:a,k=p>t.MaxCardsCapasity-1?t.MaxCardsCapasity-1:p,I=l?{tabIndex:u?-1:c,ref:l?"topCardRef":"",onClick:u?null:function(){e.disabled||(console.log(1),e.setState({prev:n,prevText:i}),e.props.onDeckClick())},onKeyDown:u?null:function(t){e.disabled||t.keyCode!==P.a.SPACEBAR&&t.keyCode!==P.a.ENTER||(t.preventDefault(),e.setState({prev:n,prevText:i}),e.props.onDeckClick())},onTransitionEnd:function(){e.setState({animation:"",prevID:s}),e.props.onTransitionEnd(k)},autoFocus:""===u,style:u?{top:"".concat(k*t.cardStep,"px"),left:"".concat(t.defaultOpenedCardIndent+k*t.cardStep,"px")}:{}}:{};b.push(o.a.createElement("div",Object.assign({key:"closedImage".concat(a)},I,{"aria-label":l?"".concat(m," ").concat(f," ").concat(r-p," ").concat(v," ").concat(r):null,"aria-describedby":l?"commonDeckSorting".concat(d):null,className:E()((""===h||!l)&&M.a.cardItem,M.a.card,M.a["card".concat(y)],u)}),l&&(""===h?o.a.createElement("p",{style:{fontSize:"14px"}},g," (",r-p,"\xa0/\xa0",r,")"):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{key:"cardFace".concat(a),style:{position:"absolute"},className:M.a.cardItem}),o.a.createElement(H.a,{key:"cardContent".concat(a),image:n?n.url:null,imageWidth:n?n.width:null,imageHeight:n?n.height:null,text:i,alt:"",className:M.a.backFace})))))},k=0;k<C-p;k++)y(k);return b}},{key:"drawOpened",value:function(){for(var e=[],a=this.state,r=a.stage,n=a.prevText,s=a.prev,i=r-1>=t.MaxCardsCapasity?t.MaxCardsCapasity:r-1,c=0;c<i;c++){var d=null!==s&&""!==s.url&&null!==n&&""!==n&&c===i-1&&M.a.noFlex;c===i-1?e.push(o.a.createElement(H.a,{key:"cardContent".concat(c),style:{height:"156px",width:"106px"},className:M.a["card".concat(c)],image:s?s.url:null,imageWidth:s?s.width:null,imageHeight:s?s.height:null,alt:"",text:n})):e.push(o.a.createElement("div",{key:"openedImage".concat(c),className:E()(M.a.card,M.a.cardItem,M.a["card".concat(c)],d)}))}return e}},{key:"resetDeck",value:function(){this.setState({prev:null,prevID:null,animation:"",stage:0})}},{key:"render",value:function(){var e=this,t=this.props,a=t.stage,r=t.totalCards,n=t.tabIndex,s=t.activityId,i=this.locale,c=i.instruction,d=i.epmtyInstruction,l=i.empty;return o.a.createElement("div",{className:E()(M.a.cardWrapper,M.a.cardDeck)},o.a.createElement("span",{className:B.a.VISUALLY_HIDDEN,id:"commonDeckSorting".concat(s)},c),o.a.createElement("span",{className:B.a.VISUALLY_HIDDEN,id:"commonDeckSortingEmpty".concat(s)},d),o.a.createElement("div",{"aria-label":l,"aria-describedby":r>0?"commonDeckSortingEmpty".concat(s):"",onKeyDown:function(t){e.disabled||t.keyCode!==P.a.SPACEBAR&&t.keyCode!==P.a.ENTER||(t.preventDefault(),e.props.onDeckClick())},onClick:function(){e.disabled||e.props.onDeckClick()},role:a===r?"button":null,className:M.a.deckPlaceholder,tabIndex:a===r?n:-1,ref:"placeholder"}),this.drawDeck(),o.a.createElement("div",{className:M.a.openedImage},this.drawOpened()),o.a.createElement("div",{id:"dragCardContainer",className:M.a.openedImage,ref:"openedImages"}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return Object(D.a)({},t,{animation:e.nextID===t.prevID||e.backward?"":M.a.flippingCard,stage:e.nextID===t.prevID||e.backward?e.stage:t.stage})}}]),t}(o.a.Component),Object(v.a)(n,"MaxCardsCapasity",4),Object(v.a)(n,"cardStep",4),Object(v.a)(n,"defaultOpenedCardIndent",160),r=s))||r,L=function(e){function t(){var e;return Object(h.a)(this,t),(e=Object(g.a)(this,Object(m.a)(t).call(this))).topOpenedCard=o.a.createRef(),e.state={prev:null,prevID:null,prevText:null,animation:"",stage:0},e}return Object(f.a)(t,e),Object(u.a)(t,[{key:"drawDeck",value:function(){for(var e=this,a=this.props,r=a.totalCards,n=a.next,s=a.nextID,i=a.nextText,c=a.tabIndex,d=this.state,l=d.stage,p=d.animation,h=r,u=[],g=function(a){var d=a===h-l-1,g=d&&p,m=a>t.MaxCardsCapasity-1?t.MaxCardsCapasity-1:a,f=l>=t.MaxCardsCapasity?t.MaxCardsCapasity:l,v=d?{tabIndex:g?-1:c,ref:d?"topCardRef":"",onTouchEnd:g?null:function(){e.disabled||(e.setState({prev:n,prevText:i}),e.props.onDeckClick())},onTransitionEnd:function(){e.setState({animation:"",prevID:s,prev:e.props.next,prevText:e.props.nextText}),e.props.onTransitionEnd&&e.props.onTransitionEnd(f)},autoFocus:""===g,style:g?{top:"".concat(f*t.cardStep,"px"),left:"".concat(t.defaultOpenedCardIndent+f*t.cardStep,"px")}:{}}:{};u.push(o.a.createElement("div",Object.assign({key:"closedImage".concat(a)},v,{className:E()((""===p||!d)&&M.a.cardItem,M.a.card,M.a["card".concat(m)],g)}),d&&(""===p?o.a.createElement("p",{style:{fontSize:"14px"}},"Click or Tap to view cards (",r-l,"\xa0/\xa0",r,")"):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{key:"cardFace".concat(a),style:{position:"absolute"},className:M.a.cardItem}),o.a.createElement(H.a,{key:"cardContent".concat(a),image:n?n.url:null,imageWidth:n?n.width:null,imageHeight:n?n.height:null,text:i,alt:"",className:M.a.backFace})))))},m=0;m<h-l;m++)g(m);return u}},{key:"drawOpened",value:function(){for(var e=[],a=this.state,r=a.stage,n=a.prevText,s=a.prev,i=this.props.tabIndex,c=r>=t.MaxCardsCapasity?t.MaxCardsCapasity:r,d=0;d<c;d++){var l=null!==s&&""!==s&&null!==n&&""!==n&&d===c-1&&M.a.noFlex;d===c-1?e.push(o.a.createElement(H.a,{onTouchEnd:this.props.onTopCardClick,key:"cardContent".concat(d),style:{height:"156px",width:"106px"},className:E()(M.a["card".concat(d)],-1===i&&M.a.dragActive),image:s?s.url:null,imageWidth:s?s.width:null,imageHeight:s?s.height:null,alt:"",text:n})):e.push(o.a.createElement("div",{key:"openedImage".concat(d),className:E()(M.a.card,M.a.cardItem,M.a["card".concat(d)],l)}))}return e}},{key:"resetDeck",value:function(){this.setState({prev:null,prevID:null,animation:"",stage:0})}},{key:"render",value:function(){var e=this,t=this.props,a=t.stage,r=t.totalCards,n=t.tabIndex;return o.a.createElement("div",{className:E()(M.a.cardWrapper,M.a.cardDeck)},o.a.createElement("div",{onTouchEnd:function(){e.disabled||e.props.onDeckClick()},role:a===r?"button":"",className:M.a.deckPlaceholder,tabIndex:a===r?n:-1,ref:"placeholder"}),this.drawDeck(),o.a.createElement("div",{className:M.a.openedImage},this.drawOpened()),o.a.createElement("div",{id:"dragCardContainer",className:M.a.openedImage,ref:"openedImages"}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return Object(D.a)({},t,{animation:e.nextID===t.prevID||e.backward?"":M.a.flippingCard,stage:e.nextID===t.prevID||e.backward?e.stage:t.stage})}}]),t}(o.a.Component);Object(v.a)(L,"MaxCardsCapasity",4),Object(v.a)(L,"cardStep",4),Object(v.a)(L,"defaultOpenedCardIndent",160);var W,V,U,K,Y,q,z=L,X=a(593),G=a.n(X),J=Object(_.a)("SortingDeck")(W=function(e){function t(e){var a;return Object(h.a)(this,t),a=Object(g.a)(this,Object(m.a)(t).call(this,e)),Object(v.a)(Object(R.a)(a),"MAX_LABEL_HEIGHT",40),Object(v.a)(Object(R.a)(a),"MAX_LABEL_WIDTH",116),Object(v.a)(Object(R.a)(a),"MIN_FONT",12),a.onKeyDown=a.onKeyDown.bind(Object(R.a)(a)),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.refs.labelRef.style.color="transparent",setTimeout((function(){for(var t=e.refs.labelRef.style,a=e.refs.labelRef.innerText.split(" "),r=a[0],n=1;n<a.length;n++)a[n].length>r.length&&(r=a[n]);var s=document.createElement("span");s.innerText=r,s.className=G.a.sortingDeckP,e.refs.categoryContainer.appendChild(s);for(var i=s.getBoundingClientRect().width,o=parseFloat(getComputedStyle(e.refs.labelRef).fontSize);e.refs.labelRef.scrollHeight>e.MAX_LABEL_HEIGHT&&o>0||i>e.MAX_LABEL_WIDTH;)if(s.style.fontSize="".concat(o,"px"),o-=.5,t.fontSize="".concat(o,"px"),i=s.getBoundingClientRect().width,o<=e.MIN_FONT){i>e.MAX_LABEL_WIDTH&&(t.wordBreak="break-word"),e.refs.labelRef.scrollHeight>e.MAX_LABEL_HEIGHT&&e.refs.labelRef.style.setProperty("align-items","flex-start"),e.refs.labelRef.style.setProperty("overflow","hidden");break}var c=e.refs.labelRef.getBoundingClientRect();c.height>=30&&(e.refs.labelRef.style.overflowY="hidden",e.refs.labelRef.classList.add(G.a.sortingDeckElipsis),c=e.refs.labelRef.getBoundingClientRect()),e.refs.labelRef.style.marginBottom="".concat(e.MAX_LABEL_HEIGHT-c.height,"px"),s.parentNode.removeChild(s),e.refs.labelRef.style.color="inherit"}),100)}},{key:"onKeyDown",value:function(e){var t=this.props.onDeckClick;e.keyCode!==P.a.SPACEBAR&&e.keyCode!==P.a.ENTER||t()}},{key:"drawDeck",value:function(){for(var e=this.props,t=e.totalCards,a=e.image,r=e.onDeckClick,n=e.text,s=e.tabIndex,i=e.onTouchEnd,c=e.index,d=e.activityId,l=e.name,p=this.onKeyDown,h=this.locale.cardCount,u=[],g=0;g<t;g++){var m=g===t-1,f=g>F.MaxCardsCapasity-1?F.MaxCardsCapasity-1:g,v=m?{onClick:r,onKeyDown:p,tabIndex:s}:null;m?u.push(o.a.createElement("div",{key:"card".concat(g),style:{height:"156px",width:"106px"},className:M.a["card".concat(f)]},o.a.createElement(H.a,Object.assign({onTouchEnd:function(){i&&i()},ariaLabel:"".concat(l," ").concat(t," ").concat(h),ariaDescribedby:"sortingDeckInstruction-".concat(c,"-").concat(d),ref:"topCard",key:"cardContent".concat(g)},v,{image:a?a.url:null,imageWidth:a?a.width:null,imageHeight:a?a.height:null,alt:"",text:n})))):u.push(o.a.createElement("div",{key:"card".concat(g),className:E()(M.a.card,M.a.cardItem,M.a["card".concat(f)])}))}return u}},{key:"render",value:function(){var e=this.props,t=e.onDeckClick,a=e.onTouchEnd,r=e.name,n=e.index,s=e.totalCards,i=e.activityId,c=this.locale,d=c.empty,l=c.instruction;return o.a.createElement("div",{ref:"categoryContainer"},o.a.createElement("span",{className:B.a.VISUALLY_HIDDEN,id:"sortingDeckInstruction-".concat(n,"-").concat(i)},l),o.a.createElement("p",{id:"sortingDeckLabel-".concat(n,"-").concat(i),ref:"labelRef",className:G.a.sortingDeckP,style:{marginTop:0,width:"116px"}},r),o.a.createElement("div",{className:M.a.cardWrapper},o.a.createElement("div",{"aria-label":0===s?"".concat(r," ").concat(d):"",onTouchEnd:function(){a&&a()},onClick:function(){t&&t()},className:E()(M.a.deckPlaceholder,M.a.sortingDeckPlaceholder)}),this.drawDeck()))}}]),t}(o.a.Component))||W,Z=a(395),Q=a(594),$=a.n(Q),ee=function(e){function t(e){var a;Object(h.a)(this,t),a=Object(g.a)(this,Object(m.a)(t).call(this,e));for(var r=[],n=[],s={},i=0;i<e.items.length;i++){var o=e.items[i];n.push([]),s["sorting".concat(i)]=0;for(var c=0;c<o.items.length;c++)r.push(o.items[c]);s["sorting".concat(i,"Items")]=[]}return a.handleDrop=a.handleDrop.bind(Object(R.a)(a)),a.getSortingDecks=a.getSortingDecks.bind(Object(R.a)(a)),a.dragSelected=a.dragSelected.bind(Object(R.a)(a)),a.onFocusCatcherHandler=a.onFocusCatcherHandler.bind(Object(R.a)(a)),a.elementToFocus=null,a.dndRef=null,a.focusOnCard=!1,a.focusSorting=-1,a.state=Object(D.a)({deck:N()(r),categories:n,currentCard:-1,currentCardIndent:-1,dragCardIndex:-1,backward:!1,cardCaptured:!1},s),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"handleKeydown",value:function(e){switch(e.keyCode){case P.a.ESC:this.dndRef.moveToInitialPosition(),this.focusTopCard=!0,this.refs.deckRef.disabled=!1,this.setState({cardCaptured:!1})}}},{key:"componentDidMount",value:function(){this.forceUpdate()}},{key:"componentDidUpdate",value:function(){if(this.focusOnCard){var e=this.refs.deckRef.refs.openedImages.querySelector("[role='button']");e?(this.focusOnCard=!1,e.focus()):this.refs.deckRef.refs.topCardRef&&this.refs.deckRef.refs.topCardRef.focus()}else this.focusTopCard?(this.focusTopCard=!1,this.refs.deckRef.refs.openedImages.querySelector("[aria-grabbed]").focus()):this.focusSorting>-1&&(this.refs["sorting".concat(this.focusSorting,"Ref")]&&this.refs["sorting".concat(this.focusSorting,"Ref")].refs.topCard&&this.refs["sorting".concat(this.focusSorting,"Ref")].refs.topCard.refs.cardContainer.focus(),this.focusSorting=-1)}},{key:"dragSelected",value:function(){this.refs.deckRef.disabled=!0,this.setState({cardCaptured:!0})}},{key:"onFocusCatcherHandler",value:function(){this.refs.categoryContainer.querySelector('[aria-dropeffect="move"]').focus()}},{key:"onSortingTouchEnd",value:function(e){var t=this.state,a=t.cardCaptured,r=t.currentCard,n=t.deck,s=this.props,i=s.items,o=s.handleCorrectDrop,c=s.handleIncorrectDrop,d=this.state["sorting".concat(e,"Items")],l=n[r],p=i[e];if(a){if(l)if(e>-1&&p.items&&p.items.indexOf(l)>-1){var h;d.items||(d.items=[]),d.items.unshift(l),n.splice(n.indexOf(l),1);var u=r-1>=0?n[r-1]:null;this.refs.deckRef.setState({prev:u?u.image.url:null,prevText:u?u.text:null,prevID:u?u.id:null}),this.setState((h={},Object(v.a)(h,"sorting".concat(e,"Items"),d),Object(v.a)(h,"sorting".concat(e),0),Object(v.a)(h,"deck",n),Object(v.a)(h,"currentCardIndent",r-1>F.MaxCardsCapasity-1?F.MaxCardsCapasity-1:r-1),Object(v.a)(h,"currentCard",r-1),Object(v.a)(h,"cardCaptured",!1),Object(v.a)(h,"backward",!0),h)),o(l.id)}else c(l.id),this.setState({cardCaptured:!1})}else d&&d.items&&0!==d.items.length&&this.onSortingClick(e)}},{key:"onTopCardClick",value:function(){this.setState({cardCaptured:!0})}},{key:"onTabletDeckClick",value:function(){var e=this.state,t=e.currentCard;t+1>e.deck.length-1?(this.refs.deckRef.resetDeck(),this.setState({currentCard:-1,currentCardIndent:-1,dragCardIndex:-1,cardCaptured:!1,backward:!1})):this.setState({currentCard:t+1,cardCaptured:!1,backward:!1})}},{key:"onDeckClick",value:function(){var e=this.state,t=e.currentCard,a=e.deck;this.dndRef.dragIndex=-1,this.dndRef.dropIndex=-1,this.dndRef.dragToDisable=-1,this.dndRef.setState({top:0,left:0,transitionInProgress:!1,keyBoardSelected:!1}),t+1>a.length-1?(this.refs.deckRef.resetDeck(),this.focusOnCard=!0,this.setState({currentCard:-1,currentCardIndent:-1,dragCardIndex:-1,cardCaptured:!1,backward:!1})):this.setState({currentCard:t+1,cardCaptured:!1,backward:!1})}},{key:"onSortingClick",value:function(e){!this.state["sorting".concat(e,"Items")].items||this.state["sorting".concat(e,"Items")].items.length<=0||(this.state["sorting".concat(e)]+1>this.state["sorting".concat(e,"Items")].items.length-1?this.setState(Object(v.a)({},"sorting".concat(e),0)):this.setState(Object(v.a)({},"sorting".concat(e),this.state["sorting".concat(e)]+1)))}},{key:"onTransitionEnd",value:function(e){this.focusOnCard=!0,this.dndRef.dragSelected(this.state.currentCard),this.dndRef.setState({keyBoardSelected:!0}),this.setState({currentCardIndent:e,dragCardIndex:this.state.currentCard})}},{key:"completeActivity",value:function(e){var t=this.props.items;if(this.focusOnCard=!1,this.focusTopCard=!1,this.focusSorting=-1,e){for(var a=[],r=[],n={},s=0;s<t.length;s++){var i=t[s];r.push([]);for(var o=0;o<i.items.length;o++)a.push(i.items[o]);n["sorting".concat(s,"Items")]=t[s]}this.setState(Object(D.a)({deck:[]},n))}else this.refs.deckRef.disabled=!0,this.setState({currentCard:-1,dragCardIndex:-1,backward:!0})}},{key:"restartActivity",value:function(){for(var e=[],t=[],a={},r=this.props,n=0;n<r.items.length;n++){var s=r.items[n];t.push([]),a["sorting".concat(n)]=0;for(var i=0;i<s.items.length;i++)e.push(s.items[i]);a["sorting".concat(n,"Items")]=[]}this.dndRef&&this.dndRef.resetDranAndDrop(),this.refs.deckRef.disabled=!1,this.refs.deckRef.setState({prevID:-1}),this.setState(Object(D.a)({deck:N()(e),categories:t,currentCard:-1,currentCardIndent:-1,cardCaptured:!1,dragCardIndex:-1,backward:!0},a))}},{key:"handleDrop",value:function(e,t,a){var r=this.state,n=r.deck,s=r.dragCardIndex,i=r.currentCard,o=this.props,c=o.items,d=o.handleCorrectDrop,l=o.handleIncorrectDrop,p=c[t],h=n[s];if(this.refs.deckRef.disabled=!1,t>-1&&p.items&&p.items.indexOf(h)>-1){var u,g=this.state["sorting".concat(t,"Items")];g.items||(g.items=[]),g.items.unshift(h),n.splice(n.indexOf(h),1),this.dndRef.dragIndex=-1,this.dndRef.dropIndex=-1,this.dndRef.dragToDisable=-1,this.dndRef.setState({top:0,left:0,transitionInProgress:!1,keyBoardSelected:!1});var m=i-2>=0?n[i-2]:null;this.refs.deckRef.setState({prev:m&&m.image?m.image.url:null,prevText:m?m.text:null,prevID:m?m.id:null}),this.focusSorting=t,this.setState((u={},Object(v.a)(u,"sorting".concat(t,"Items"),g),Object(v.a)(u,"sorting".concat(t),0),Object(v.a)(u,"deck",n),Object(v.a)(u,"dragCardIndex",s-1),Object(v.a)(u,"currentCardIndent",i-1>F.MaxCardsCapasity-1?F.MaxCardsCapasity-1:i-1),Object(v.a)(u,"currentCard",i-1),Object(v.a)(u,"cardCaptured",!1),Object(v.a)(u,"backward",!0),u)),d(h.id)}else this.dndRef.moveToInitialPosition(),this.focusTopCard=!0,a&&t>-1&&l(h.id),this.setState({cardCaptured:!1})}},{key:"getSortingDecks",value:function(){var e=this,t=this.props,a=t.items,r=t.activityId,n=this.state.cardCaptured;return a.map((function(t,s){var i=e.state["sorting".concat(s)],c=e.state["sorting".concat(s,"Items")],d=c.items&&c.items.length>0&&c.items[i]?c.items[i]:null,l=Object(j.h)()?{onTouchEnd:function(){return e.onSortingTouchEnd(s)}}:{onDeckClick:function(){return e.onSortingClick(s)}};return o.a.createElement(J,Object.assign({activityId:r,index:s,key:"categoryDeck".concat(s),ref:"sorting".concat(s,"Ref"),image:d&&d.image?d.image:null,text:d?d.text:null,stage:i,totalCards:c.items?c.items.length:0,name:a[s].title,tabIndex:n?-1:0},l))}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.currentCard,r=t.deck,n=t.currentCardIndent,s=t.dragCardIndex,i=t.backward,c=t.cardCaptured,d=this.props,l=d.playerSelector,p=d.activityId,h=d.items;return o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{className:B.a.VISUALLY_HIDDEN,id:"drop-instruction-".concat(p)},"Use spacebar or double tap to drop"),o.a.createElement("div",{role:"group",ref:"categoryContainer",className:$.a.categoryContainer,"aria-labelledby":"categoryGroup".concat(p)},o.a.createElement("span",{id:"categoryGroup".concat(p),className:B.a.VISUALLY_HIDDEN},"Categories"),Object(j.h)()&&this.getSortingDecks()),o.a.createElement("div",{className:$.a.centerDeck},Object(j.h)()?o.a.createElement(z,{tabIndex:c?-1:0,ref:"deckRef",next:a>-1&&0!==r.length&&r[a].image?r[a].image.url:null,nextText:a>-1&&0!==r.length?r[a].text:null,nextID:a>-1&&0!==r.length?r[a].id:null,stage:a+1,totalCards:r.length,onDeckClick:this.onTabletDeckClick.bind(this),onTopCardClick:this.onTopCardClick.bind(this),backward:i}):o.a.createElement(F,{activityId:p,tabIndex:c?-1:0,ref:"deckRef",next:a>-1&&0!==r.length&&r[a].image?r[a].image:null,nextText:a>-1&&0!==r.length?r[a].text:null,nextID:a>-1&&0!==r.length?r[a].id:null,stage:a+1,totalCards:r.length,onDeckClick:this.onDeckClick.bind(this),onTransitionEnd:this.onTransitionEnd.bind(this),backward:i})),!Object(j.h)()&&this.refs.deckRef&&o.a.createElement(Z.a,{resetOnMouseClick:!0,ref:function(t){return e.dndRef=t},handleDrop:this.handleDrop,activityId:p,parentSelector:l,dragSelected:this.dragSelected,dragContainerSelector:l+" ."+$.a.centerDeck+" ."+M.a.openedImage+"#dragCardContainer",dropContainerSelector:l+" ."+$.a.categoryContainer,targets:this.getSortingDecks(),items:s>-1&&0!==r.length?[o.a.createElement("div",{ref:"dragCard",style:c?{position:"absolute"}:{top:"".concat(n*F.cardStep,"px"),left:"".concat(n*F.cardStep,"px"),position:"absolute"},className:M.a.card},o.a.createElement(H.a,{alt:r[s].image?r[s].imageAlt:null,text:r[s].text,image:r[s].image?r[s].image.url:null,imageWidth:r[s].image?r[s].image.width:null,imageHeight:r[s].image?r[s].image.height:null,className:c?M.a.dragActive:""}))]:[],dragLabels:[r[s]?"".concat(r[s].text," ").concat(r[s].image?r[s].imageAlt:""," ").concat(c?"":"Use spacebar or double tap to select the card to drag into the category."):""],dropLabels:h.map((function(e){return"Categories ".concat(e.title)})),dragClass:E()(M.a.cardDrag,M.a["cardDragIndent".concat(n)]),dropClass:this.props.items.map((function(t,a){return e.state["sorting".concat(a,"Items")].items?e.state["sorting".concat(a,"Items")].items.length>4?E()(M.a.dropClass,M.a.dropClass4):E()(M.a.dropClass,M.a["dropClass".concat(e.state["sorting".concat(a,"Items")].items.length)]):M.a.dropClass})),activeDropClass:$.a.activeDropClass,dragClosestRelativeParent:this.refs.deckRef.refs.openedImages}),o.a.createElement("div",{className:$.a.focusCatcher,tabIndex:c?0:-1,onFocus:this.onFocusCatcherHandler}))}}]),t}(o.a.Component),te=a(595),ae=a.n(te),re=function(e){function t(){return Object(h.a)(this,t),Object(g.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"drawDeck",value:function(){for(var e=this.props,t=e.totalCards,a=e.image,r=e.onDeckClick,n=e.text,s=e.alt,i=[],c=0;c<t;c++){var d=c===t-1,l=c>F.MaxCardsCapasity-1?F.MaxCardsCapasity-1:c,p=d?{onTouchEnd:r,tabIndex:0,role:"button"}:null,h=d?{image:a?a.url:null,imageWidth:a?a.width:null,imageHeight:a?a.height:null,text:n,alt:s}:null;i.push(o.a.createElement("div",Object.assign({},p,{key:"card".concat(c),className:E()(ae.a.card,ae.a["card".concat(l)])}),o.a.createElement(H.a,h)))}return i}},{key:"render",value:function(){var e=this.props.onDeckClick;return o.a.createElement("div",{className:E()(M.a.cardWrapper,ae.a.deckWrapper)},o.a.createElement("div",{onClick:function(){e()},className:E()(M.a.deckPlaceholder,ae.a.card0)}),this.drawDeck())}}]),t}(o.a.Component),ne=a(596),se=a.n(ne),ie=function(e){function t(e){var a;Object(h.a)(this,t),a=Object(g.a)(this,Object(m.a)(t).call(this,e)),Object(v.a)(Object(R.a)(a),"STATUS",{CORRECT:"correct",WRONG:"wrong"});for(var r=[],n=[],s={},i=0;i<e.items.length;i++){var o=e.items[i];n.push([]),s["sorting".concat(i)]=0;for(var c=0;c<o.items.length;c++)r.push(o.items[c]);s["sorting".concat(i,"Items")]=[]}return a.onDeckClick=a.onDeckClick.bind(Object(R.a)(a)),a.onClickCategory=a.onClickCategory.bind(Object(R.a)(a)),a.changeCurrentCategory=a.changeCurrentCategory.bind(Object(R.a)(a)),a.categoryClass=e.items.length>3?"":se.a.categoryContainer,a.state=Object(D.a)({deck:N()(r),categories:n,currentCard:-1,backFaceShown:!0,currentCategoryIndex:-1,statusIndex:-1,status:""},s),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"completeActivity",value:function(e){var t=this.props.items;if(e){for(var a=[],r=[],n={},s=0;s<t.length;s++){var i=t[s];r.push([]);for(var o=0;o<i.items.length;o++)a.push(i.items[o]);n["sorting".concat(s,"Items")]=t[s]}this.setState(Object(D.a)({deck:[]},n))}else this.setState({currentCard:-1})}},{key:"restartActivity",value:function(){for(var e=[],t=[],a={},r=this.props,n=0;n<r.items.length;n++){var s=r.items[n];t.push([]),a["sorting".concat(n)]=0;for(var i=0;i<s.items.length;i++)e.push(s.items[i]);a["sorting".concat(n,"Items")]=[]}this.setState(Object(D.a)({deck:N()(e),categories:t,currentCard:-1,backFaceShown:!0,currentCategoryIndex:-1,statusIndex:-1,status:""},a))}},{key:"onDeckClick",value:function(){var e=this.state,t=e.currentCard,a=e.deck,r=e.backFaceShown,n=this.props.complete;r&&!n&&this.setState({backFaceShown:!1,statusIndex:-1,status:""}),this.setState({currentCard:t+1>a.length-1?0:t+1})}},{key:"changeCurrentCategory",value:function(e){this.setState({deck:this.state["sorting".concat(e,"Items")].items?this.state["sorting".concat(e,"Items")].items:[],currentCard:0,backFaceShown:!1,currentCategoryIndex:e,status:"",statusIndex:-1})}},{key:"onClickCategory",value:function(e){var t=this.state,a=t.deck,r=t.currentCard,n=t.backFaceShown,s=this.props,i=s.items,o=s.handleCorrectDrop,c=s.handleIncorrectDrop,d=i[e],l=a[r];if(!n)if(e>-1&&d.items&&d.items.indexOf(l)>-1){var p,h=this.state["sorting".concat(e,"Items")];h.items||(h.items=[]),h.items.unshift(l),a.splice(a.indexOf(l),1),o(l.id),this.setState((p={},Object(v.a)(p,"sorting".concat(e,"Items"),h),Object(v.a)(p,"status",this.STATUS.CORRECT),Object(v.a)(p,"statusIndex",e),Object(v.a)(p,"backFaceShown",!0),Object(v.a)(p,"deck",a),p))}else c(l.id),this.setState({status:this.STATUS.WRONG,statusIndex:e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.items,r=t.complete,n=this.state,s=n.deck,i=n.currentCard,c=n.backFaceShown,d=n.statusIndex,l=n.status,p=n.currentCategoryIndex,h=this.categoryClass,u=!c&&s[i]?s[i]:{text:"Click or Tap to View cards (".concat(s.length,"\xa0/\xa0").concat(s.length,")")};return o.a.createElement("div",{className:se.a.mobileViewContainer},o.a.createElement(re,Object.assign({},u,{onDeckClick:this.onDeckClick,totalCards:s.length})),o.a.createElement("div",{className:E()(h,se.a.categoryFlexBasis)},a.map((function(t,a){return o.a.createElement("button",{"data-content":e.state["sorting".concat(a,"Items")].items?e.state["sorting".concat(a,"Items")].items.length:null,onClick:function(){r?e.changeCurrentCategory(a):e.onClickCategory(a)},className:E()(se.a.categoryButton,!c&&!r&&se.a.selectedButton,a===d&&se.a[l],e.state["sorting".concat(a,"Items")].items&&e.state["sorting".concat(a,"Items")].items.length>0&&se.a.categoryCounter,r&&p===a&&se.a.categorySelected),key:"categoryButton".concat(a),value:t.title},t.title)}))))}}]),t}(o.a.Component),oe=a(269),ce=a(271),de=a(597),le=a.n(de),pe=a(315),he=a(273),ue=a(264),ge=a(263),me=function(e){function t(){return Object(h.a)(this,t),Object(g.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.complete,a=e.showRestart;return o.a.createElement("div",{className:le.a.container},o.a.createElement("div",{className:le.a.navigation},!j.d&&o.a.createElement(he.a,{excludeItems:a?null:{restart:!0}})),o.a.createElement("div",{className:le.a.score},o.a.createElement(pe.a,{complete:t,displayedScore:this.props.displayedScore,totalScore:this.props.totalScore})),o.a.createElement("div",{className:le.a.buttons},o.a.createElement(ue.b,{id:ge.a.COMPLETE_ACTIVITY,disabled:this.props.complete,className:ue.a["complete-activity"],onFocus:this.props.onButtonFocus,onClick:this.props.completeActivity,hint:!0}),this.props.showRestart&&o.a.createElement(ue.b,{id:ge.a.RESTART,className:ue.a.restart,onFocus:this.props.onButtonFocus,onClick:this.props.restart,hint:!0})))}}]),t}(i.PureComponent),fe=a(282),ve=a(48),Ce=a(49),be=a(267),ye=a.n(be),ke=Object(l.b)((function(e){return Object(D.a)({},e,{activityId:e.id,activityType:e.type,activityName:e.name,finalResponse:"Completed!",correctResponse:"Correct!",incorrectResponse:"Incorrect"})}),y)(V=Object(_.a)("Activity")((U=function(e){function t(e){var a;Object(h.a)(this,t),(a=Object(g.a)(this,Object(m.a)(t).call(this,e))).errors=[],a.totalCards=-1,a.itemsWithTitles=[];var r=e.items;return-1===a.totalCards&&r.map((function(e){return""!==e.title&&a.itemsWithTitles.push(e),e.items.map((function(){return a.totalCards++,null})),null})),a.state={ariaText:"",displayedScore:0,completedItems:0,complete:!1},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"fillStorage",value:function(e){var t=this,a=this.props,r=a.activityId,n=a.activityType;if(e==="".concat(n,"-").concat(r)){var s=null;sessionStorage&&(s=JSON.parse(sessionStorage.getItem("".concat(n,"-").concat(r)))),s&&s.hasOwnProperty("pointsEarned")&&s.hasOwnProperty("isRestart")&&!1===s.isRestart&&this.setState({displayedScore:s.pointsEarned,complete:!0},(function(){t.viewRef.refs.deckRef.disabled=!0,t.viewRef.setState({sorting0:s.options.sorting0,sorting0Items:s.options.sorting0Items?{items:s.options.sorting0Items}:[],sorting1:s.options.sorting1,sorting1Items:s.options.sorting1Items?{items:s.options.sorting1Items}:[],sorting2:s.options.sorting2,sorting2Items:s.options.sorting2Items?{items:s.options.sorting2Items}:[],sorting3:s.options.sorting3,sorting3Items:s.options.sorting3Items?{items:s.options.sorting3Items}:[],sorting4:s.options.sorting4,sorting4Items:s.options.sorting4Items?{items:s.options.sorting4Items}:[],deck:s.options.deck,categories:s.options.categories})}))}}},{key:"componentDidMount",value:function(){var e=this.props,t=e.activityId,a=e.activityType;this.fillStorage("".concat(a,"-").concat(t)),ve.a.on(Ce.a.LOAD_STORAGE,this.fillStorage),this.viewRef.handleKeydown&&this.refs.section.addEventListener("keydown",this.viewRef.handleKeydown.bind(this.viewRef))}},{key:"componentWillUnmount",value:function(){this.viewRef.handleKeydown&&this.refs.section.removeEventListener("keydown",this.viewRef.handleKeydown.bind(this.viewRef))}},{key:"handleIncorrectDrop",value:function(e){var t=this.props.playFeedbackSounds;this.errors[e]?this.errors[e]++:this.errors[e]=1,t&&fe.a.playWrong(),this.setState({ariaText:this.locale.incorrect})}},{key:"handleCorrectDrop",value:function(e){var t=this.props,a=t.activityId,r=t.activityType,n=t.score,s=t.playFeedbackSounds,i=this.errors,o=n/(this.totalCards+1),c=this.state,d=c.displayedScore,l=c.completedItems;i[e]>0?d+=0:d+=o,l+1===this.totalCards+1&&Object(S.b)({id:a,type:r,pointsEarned:d,maxValue:n,isRestart:!1,options:JSON.stringify({sorting0:this.viewRef.state.sorting0,sorting0Items:this.viewRef.state.sorting0Items?this.viewRef.state.sorting0Items.items:[],sorting1:this.viewRef.state.sorting1,sorting1Items:this.viewRef.state.sorting1Items?this.viewRef.state.sorting1Items.items:[],sorting2:this.viewRef.state.sorting2,sorting2Items:this.viewRef.state.sorting2Items?this.viewRef.state.sorting2Items.items:[],sorting3:this.viewRef.state.sorting3,sorting3Items:this.viewRef.state.sorting3Items?this.viewRef.state.sorting3Items.items:[],sorting4:this.viewRef.state.sorting4,sorting4Items:this.viewRef.state.sorting4Items?this.viewRef.state.sorting4Items.items:[],deck:this.viewRef.state.deck,categories:this.viewRef.state.categories})}),s&&fe.a.playCorrect(),this.setState({displayedScore:d,completedItems:l+1,ariaText:this.locale.correct,complete:l+1===this.totalCards+1})}},{key:"completeActivity",value:function(){var e=this.props,t=e.activityId,a=e.activityType,r=e.score,n=e.showAnswers,s=e.finalResponse,i=e.items,o=this.state.displayedScore;this.viewRef.completeActivity(n);var c=[],d=[],l={};if(n){for(var p=0;p<i.length;p++){var h=i[p];d.push([]);for(var u=0;u<h.items.length;u++)c.push(h.items[u]);l["sorting".concat(p,"Items")]=i[p].items,l["sorting".concat(p)]=0}c=[]}else l={sorting0:this.viewRef.state.sorting0,sorting0Items:this.viewRef.state.sorting0Items.items,sorting1:this.viewRef.state.sorting1,sorting1Items:this.viewRef.state.sorting1Items.items,sorting2:this.viewRef.state.sorting2,sorting2Items:this.viewRef.state.sorting2Items.items,sorting3:this.viewRef.state.sorting3,sorting3Items:this.viewRef.state.sorting3Items.items,sorting4:this.viewRef.state.sorting4,sorting4Items:this.viewRef.state.sorting4Items.items},c=this.viewRef.state.deck,d=this.viewRef.state.categories;Object(S.b)({id:t,type:a,pointsEarned:o,maxValue:r,isRestart:!1,options:JSON.stringify(Object(D.a)({deck:c,categories:d},l))}),this.setState({completedItems:10,complete:!0,ariaText:s})}},{key:"restart",value:function(){var e=this.props,t=e.activityId,a=e.activityType,r=e.score;Object(S.b)({id:t,type:a,pointsEarned:0,maxValue:r,isRestart:!0}),this.viewRef.restartActivity(),this.errors=[],this.setState({displayedScore:0,completedItems:0,complete:!1,ariaText:""})}},{key:"render",value:function(){var e=this,t=this.props,a=t.studentInstruction,r=t.activityName,n=t.activityId,s=t.showRestart,i=t.score,c=t.finalResponse,d=t.correctResponse,l=t.incorrectResponse,p=O.a.player+n,h="#"+p,u=this.state,g=u.ariaText,m=u.displayedScore,f=u.complete,v={playerSelector:h,handleCorrectDrop:this.handleCorrectDrop.bind(this),handleIncorrectDrop:this.handleIncorrectDrop.bind(this),items:this.itemsWithTitles,ref:function(t){e.viewRef=t}},C=f?o.a.createElement("span",null,c):g===this.locale.incorrect?o.a.createElement("span",{className:O.a.incorrect},l):""!==g?o.a.createElement("span",{className:O.a.correct},d):null;return o.a.createElement("section",{ref:"section",role:"application",tabIndex:"0",className:O.a.container,onKeyDown:this.onActivityKeyDown},o.a.createElement(oe.a,{ariaText:g}),o.a.createElement(ce.a,{activityName:r,studentInstruction:a}),o.a.createElement("div",{id:p,className:O.a.player},o.a.createElement(me,{completeActivity:this.completeActivity.bind(this),restart:this.restart.bind(this),complete:f,totalScore:i,displayedScore:parseFloat(m.toFixed(1)),showRestart:s,onButtonFocus:function(){}}),o.a.createElement("div",{className:O.a.response},C),j.d&&!Object(j.h)()?o.a.createElement(ie,Object.assign({complete:f},this.props,v)):o.a.createElement(ee,Object.assign({},this.props,v))))}}]),t}(i.PureComponent),Object(I.a)(U.prototype,"fillStorage",[ye.a],Object.getOwnPropertyDescriptor(U.prototype,"fillStorage"),U.prototype),V=U))||V)||V,Ie=Object(l.b)((function(e){return{displayMode:e.displayMode,displaySetting:e.displaySetting,displayIconImage:e.displayIconImage,activityName:e.name,activityType:e.type}}),y)((q=Y=function(e){function t(){return Object(h.a)(this,t),Object(g.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"activity",get:function(){return o.a.createElement(ke,{activityAlign:this.activityAlign})}}]),t}(k.a),Object(v.a)(Y,"propTypes",k.a.propTypes),K=q))||K,De=a(280),xe=a(277);a.d(t,"bootstrap",(function(){return Oe}));var Oe=function(e,t,a){var r,n=De.a.createStore((r=t,Object(D.a)({},r)),p);d.a.render(o.a.createElement(l.a,{store:n},o.a.createElement(xe.a.Provider,{value:a.sorting},o.a.createElement(Ie,null))),e)}},315:function(e,t,a){"use strict";var r,n=a(31),s=a(32),i=a(254),o=a(252),c=a(256),d=a(253),l=a(255),p=a(316),h=a.n(p),u=a(251),g=a.n(u),m=a(261),f=a(269),v=Object(m.a)("Score")(r=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),d=0;d<r;d++)s[d]=arguments[d];return a=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(s))),Object(l.a)(Object(c.a)(a),"displayedScore",0),Object(l.a)(Object(c.a)(a),"ariaText",""),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.totalScore,a=e.displayedScore;t&&a!==this.displayedScore&&(this.displayedScore=a,this.ariaText="".concat(this.locale.your_score," ").concat(this.displayedScore," ").concat(this.locale.out_of," ").concat(t))}},{key:"render",value:function(){var e=this.props,t=e.totalScore,a=e.complete;return t?g.a.createElement("div",{className:h.a.container},g.a.createElement(f.a,{ariaText:"".concat(this.ariaText,". ").concat(a?this.locale.complete_message:"")}),g.a.createElement("span",{className:h.a.current},this.displayedScore),"\xa0 / \xa0",g.a.createElement("span",{className:h.a.total},t)):null}}]),t}(u.PureComponent))||r;t.a=v},316:function(e,t,a){e.exports={cardContentWidth:"800px",primaryColor:"#000",secondaryColor:"#c0c0c0",container:"Score_container__2hyNk",current:"Score_current__1HHvw",total:"Score_total__1eQ9Z"}},340:function(e,t,a){e.exports={cardContentWidth:"800px",primaryColor:"#000",secondaryColor:"#c0c0c0",deckContainer:"CardDeck_deckContainer__2G2KP",cardWrapper:"CardDeck_cardWrapper__1XWja",cardDeck:"CardDeck_cardDeck__MqCNy",cardItem:"CardDeck_cardItem__V6Am-",card:"CardDeck_card__11r6L",card0:"CardDeck_card0__IZ9C_",card1:"CardDeck_card1__1UP6G",card2:"CardDeck_card2__1SDHo",card3:"CardDeck_card3__2c1j9",flippingCard:"CardDeck_flippingCard__gvLYp",backFace:"CardDeck_backFace__34_27",openedImage:"CardDeck_openedImage__2Eu9U",deckPlaceholder:"CardDeck_deckPlaceholder__3jwbP",sortingDeckPlaceholder:"CardDeck_sortingDeckPlaceholder__3IjBp",cardDrag:"CardDeck_cardDrag__aMSId",cardDragIndent1:"CardDeck_cardDragIndent1__eoAtu",cardDragIndent2:"CardDeck_cardDragIndent2__1IyO1",cardDragIndent3:"CardDeck_cardDragIndent3__j2hCH",dragActive:"CardDeck_dragActive__1vfkm",dropClass:"CardDeck_dropClass__2RA2j",dropClass0:"CardDeck_dropClass0__30m1j",dropClass1:"CardDeck_dropClass1__3yJHs",dropClass2:"CardDeck_dropClass2__2GYaQ",dropClass3:"CardDeck_dropClass3__hlaze",dropClass4:"CardDeck_dropClass4__3wVCF"}},377:function(e,t,a){e.exports={cardContentWidth:"800px",primaryColor:"#000",secondaryColor:"#c0c0c0",drag:"Drag_drag__lnffN",transition:"Drag_transition__3OV0u",placeholder:"Drag_placeholder__2Deg4",dragging:"Drag_dragging__2Hv-V"}},378:function(e,t,a){e.exports={cardContentWidth:"800px",primaryColor:"#000",secondaryColor:"#c0c0c0",activeDrop:"Drop_activeDrop__2o3R6",targetWrapper:"Drop_targetWrapper__3wsld",disabled:"Drop_disabled__1lxHh"}},395:function(e,t,a){"use strict";var r,n,s,i=a(31),o=a(32),c=a(254),d=a(252),l=a(256),p=a(253),h=a(255),u=a(266),g=a(251),m=a.n(g),f=a(268),v=a.n(f),C=a(257),b=a.n(C),y=a(377),k=a.n(y),I=a(258),D=a(261),x=a(265),O=Object(D.a)("Drag")(r=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).mouseDownHandler=a.mouseDownHandler.bind(Object(l.a)(a)),a.keyDownHandler=a.keyDownHandler.bind(Object(l.a)(a)),a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"mouseDownHandler",value:function(e){var t=this.props,a=t.mouseDown,r=t.index;e.preventDefault(),a(e,r)}},{key:"keyDownHandler",value:function(e){switch(e.keyCode){case I.a.SPACEBAR:case I.a.ENTER:var t=this.props,a=t.index,r=t.dragSelected;e.preventDefault(),r(a)}}},{key:"render",value:function(){var e=this.props,t=e.detached,a=e.transitionInProgress,r=e.children,n=e.top,s=e.left,i=e.transitionEnd,o=e.disabled,c=e.focusable,d=e.ariaLabel,l=e.grabbed,p=e.index,h=e.dragClass,u=e.activityId,g=e.placeholderClassName,f={top:n,left:s},v=this.locale||{},C=v.label,y=v.description;return!o&&m.a.createElement(m.a.Fragment,null,t&&m.a.createElement("div",{className:"".concat(k.a.placeholder," ").concat(g)}),m.a.createElement("div",{ref:"containerRef",role:"button","aria-grabbed":l,"aria-label":"".concat(C," ").concat(d),"aria-describedby":"".concat(k.a.drag).concat(p).concat(u,"__description"),tabIndex:c?0:-1,onTransitionEnd:i,className:b()(k.a.drag,a&&k.a.transition,t&&k.a.dragging,h),style:t?f:null,onMouseDown:this.mouseDownHandler,onKeyDown:this.keyDownHandler},m.a.createElement("span",{id:"".concat(k.a.drag).concat(p).concat(u,"__description"),className:x.a.VISUALLY_HIDDEN},y),r))}}]),t}(g.Component))||r,S=a(378),_=a.n(S),j=Object(D.a)("Drop")(n=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).containerRef=m.a.createRef(),a.keyDownHandler=a.keyDownHandler.bind(Object(l.a)(a)),a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"keyDownHandler",value:function(e){var t=this.props,a=t.onDropKeyDown,r=t.index;switch(e.keyCode){case I.a.SPACEBAR:case I.a.ENTER:var n=this.props,s=n.index,i=n.dropSelected;e.preventDefault(),i(s)}a&&a(r,e)}},{key:"render",value:function(){var e=this.props,t=e.children,a=e.active,r=e.disabled,n=e.focusable,s=e.ariaLabel,i=e.index,o=e.dropClass,c=e.activeDropClass,d=e.activityId,l=(this.locale||{}).description;return m.a.createElement("div",{role:"button","aria-label":s,"aria-describedby":"".concat(_.a.targetWrapper).concat(i).concat(d,"__description"),"aria-dropeffect":"move",tabIndex:n?0:-1,className:b()(o,_.a.targetWrapper,r&&_.a.disabled),onKeyDown:this.keyDownHandler,ref:this.containerRef},m.a.createElement("span",{className:x.a.VISUALLY_HIDDEN,id:"".concat(_.a.targetWrapper).concat(i).concat(d,"__description")},r?this.locale.disabled:l),t,a&&m.a.createElement("div",{"aria-hidden":!0,className:b()(_.a.activeDrop,c)}))}}]),t}(g.Component))||n,R=a(267),w=a.n(R);a.d(t,"a",(function(){return E}));var E=(s=function(e){function t(e){var a;return Object(i.a)(this,t),a=Object(c.a)(this,Object(d.a)(t).call(this,e)),Object(h.a)(Object(l.a)(a),"dragIndex",-1),Object(h.a)(Object(l.a)(a),"dropIndex",-1),Object(h.a)(Object(l.a)(a),"dragToDisable",-1),Object(h.a)(Object(l.a)(a),"dragWidth",100),Object(h.a)(Object(l.a)(a),"dragHeight",80),Object(h.a)(Object(l.a)(a),"initPosition",null),Object(h.a)(Object(l.a)(a),"parentNode",null),Object(h.a)(Object(l.a)(a),"cursorIndent",null),Object(h.a)(Object(l.a)(a),"dragRefs",[]),Object(h.a)(Object(l.a)(a),"dropRefs",[]),Object(h.a)(Object(l.a)(a),"dragClosestRelativeParent",null),a.mouseMoveHandler=a.mouseMoveHandler.bind(Object(l.a)(a)),a.mouseDownHandler=a.mouseDownHandler.bind(Object(l.a)(a)),a.mouseUpHandler=a.mouseUpHandler.bind(Object(l.a)(a)),a.transitionEndHandler=a.transitionEndHandler.bind(Object(l.a)(a)),a.findDrop=a.findDrop.bind(Object(l.a)(a)),a.dragSelected=a.dragSelected.bind(Object(l.a)(a)),a.dropSelected=a.dropSelected.bind(Object(l.a)(a)),a.updateValueStyle=a.updateValueStyle.bind(Object(l.a)(a)),a.state={top:0,left:0,keyBoardSelected:!1,transitionInProgress:!1,disabledDrops:[],disabledDrags:[]},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"resetDranAndDrop",value:function(){this.dragIndex=-1,this.dropIndex=-1,this.dragToDisable=-1,this.setState({top:0,left:0,transitionInProgress:!1,disabledDrops:[],disabledDrags:[]})}},{key:"fillDragAndDrop",value:function(){this.dragIndex=-1,this.dropIndex=-1,this.dragToDisable=-1;for(var e=[],t=0;t<this.props.items.length;t++)e.push(t);this.setState({top:0,left:0,transitionInProgress:!1,disabledDrops:e,disabledDrags:e})}},{key:"createMatch",value:function(e,t){var a=this.state.disabledDrops;a.indexOf(t)<0&&a.push(t),this.dragToDisable=e,this.setState({disabledDrops:a})}},{key:"updateValueStyle",value:function(){var e=this.refs,t=e.dragContainer,a=e.value,r=a.innerText;if(t){var n=a.style;if(r){var s=parseFloat(getComputedStyle(t).height),i=parseFloat(getComputedStyle(t).width);n.removeProperty("font-size");var o=parseFloat(getComputedStyle(t).fontSize);for(n.paddingTop=0,n.paddingBottom=0;a.scrollHeight>s&&o>0;)n.fontSize="".concat(o,"px"),o-=.5;this.fontSize=o,this.top=(s-a.scrollHeight)/2,this.left=(i-a.scrollWidth)/2}else n.removeProperty("padding-top"),n.removeProperty("padding-bottom"),n.removeProperty("height"),n.removeProperty("font-size")}}},{key:"componentDidMount",value:function(){var e=this.props.parentSelector;this.parentNode=document.querySelector(e),this.forceUpdate()}},{key:"updatePosition",value:function(e,t){var a=this.colsestRelativeParentPos,r=this.parentNode.getBoundingClientRect(),n=a.y-r.y,s=a.x-r.x;n&&s||(n=a.top-r.top,s=a.left-r.left);var i=t-r.top-this.cursorIndent.top-n,o=e-r.left-this.cursorIndent.left-s;r.width-o-s>r.width?o=-s:r.width-o-s<this.dragWidth&&(o=r.width-this.dragWidth-s),r.height-i-n>r.height?i=-n:r.height-i-n<this.dragHeight&&(i=r.height-this.dragHeight-n),this.setState({top:i,left:o})}},{key:"scrollContainer",value:function(){var e=this.state.top,t=this.scrollContainerRef.getBoundingClientRect();e+this.dragHeight>=t.height&&this.dropPortal.scrollHeight-e>this.scrollContainerRef.scrollTop+this.dragHeight?this.scrollContainerRef.scrollTop=this.scrollContainerRef.scrollTop+5:e<=0&&this.scrollContainerRef.scrollTop>0?this.scrollContainerRef.scrollTop=this.scrollContainerRef.scrollTop-5:(clearInterval(this.scrollIntervalID),this.scrollIntervalID=null)}},{key:"componentWillUpdate",value:function(){var e=this;this.dragIndex>-1&&!this.scrollIntervalID&&this.scrollContainerRef&&(this.scrollIntervalID=setInterval((function(){e.scrollContainer()}),10))}},{key:"mouseMoveHandler",value:function(e){var t=this.state,a=t.transitionInProgress;t.keyBoardSelected||this.dragIndex>-1&&!a&&(this.dropIndex=this.findDrop(e),this.dragMoved=!0,this.updatePosition(e.clientX,e.clientY))}},{key:"mouseDownHandler",value:function(e,t){var a=this.state.keyBoardSelected,r=this.props.resetOnMouseClick;if(a){if(!r)return;this.moveToInitialPosition()}if(-1===this.dragIndex){var n=this.props.dragClosestRelativeParent;this.colsestRelativeParentPos=n?n.getBoundingClientRect():this.parentNode?this.parentNode.getBoundingClientRect():null;var s=this.dragRefs[t].refs.containerRef.getBoundingClientRect();this.dragIndex=t,this.dragHeight=s.height,this.dragWidth=s.width,this.initPosition=e.currentTarget.getBoundingClientRect(),document.addEventListener("mousemove",this.mouseMoveHandler),document.addEventListener("mouseup",this.mouseUpHandler),this.cursorIndent={top:e.clientY-this.initPosition.top,left:e.clientX-this.initPosition.left},this.props.dragSelected&&this.props.dragSelected(this.dragIndex),this.updatePosition(e.clientX,e.clientY),this.initialScrollTop=this.dropPortal.scrollTop}}},{key:"mouseUpHandler",value:function(){if(!this.state.keyBoardSelected&&-1!==this.dragIndex){var e=this.props.handleDrop;e&&e(this.dragIndex,this.dropIndex,this.dragMoved),this.dragMoved=!1,document.removeEventListener("mousemove",this.mouseMoveHandler),document.removeEventListener("mouseup",this.mouseUpHandler)}}},{key:"dragSelected",value:function(e){-1===this.dragIndex&&(this.dragIndex=e,this.setState({keyBoardSelected:!0})),this.props.dragSelected&&this.props.dragSelected(this.dragIndex)}},{key:"dropSelected",value:function(e){if(-1!==this.dragIndex){var t=this.props.handleDrop;t&&t(this.dragIndex,e,this.dragMoved||this.state.keyBoardSelected),clearInterval(this.scrollIntervalID),this.scrollIntervalID=null}}},{key:"findDrop",value:function(e){for(var t=-1,a=0;a<this.dropRefs.length;a++)if(this.dropRefs[a]){if(!this.dropRefs[a].containerRef.current)return null;var r=this.dropRefs[a].containerRef.current.getBoundingClientRect();if(e.clientY>r.top&&e.clientY<r.top+r.height&&e.clientX>r.left&&e.clientX<r.left+r.width){t=a;break}}return t}},{key:"moveToInitialPosition",value:function(){var e=this,t=this.state,a=t.keyBoardSelected,r=t.disabledDrags,n=this.colsestRelativeParentPos;if(-1!==this.dragIndex)if(a)this.dragIndex=-1,this.dropIndex=-1,this.dragToDisable=-1,this.setState({disabledDrags:r,transitionInProgress:!1,keyBoardSelected:!1});else{var s=this.parentNode.getBoundingClientRect(),i=n.y-s.y,o=n.x-s.x;i&&o||(i=n.top-s.top,o=n.left-s.left);var c=this.initPosition.top-s.top-i-(this.dropPortal.scrollTop-this.initialScrollTop),d=this.initPosition.left-s.left-o;this.state.top===c&&this.state.left===d||0===this.state.top&&0===this.state.left?(this.dragIndex=-1,this.dropIndex=-1,this.dragToDisable=-1,this.setState({disabledDrags:r,transitionInProgress:!1})):requestAnimationFrame((function(){e.setState({top:c,left:d,transitionInProgress:!0})}))}}},{key:"moveToDropPosition",value:function(){var e=this,t=this.state,a=t.keyBoardSelected,r=t.disabledDrags,n=this.colsestRelativeParentPos;if(a)r.indexOf(this.dragIndex)<0&&r.push(this.dragIndex),this.dragIndex=-1,this.dropIndex=-1,this.dragToDisable=-1,this.setState({disabledDrags:r,transitionInProgress:!1,keyBoardSelected:!1});else{var s=this.parentNode.getBoundingClientRect(),i=n.y-s.y,o=n.x-s.x;i&&o||(i=n.top-s.top,o=n.left-s.left);var c=this.dropRefs[this.dropIndex].containerRef.current.getBoundingClientRect(),d=c.top-s.top+c.height/2-this.dragHeight/2-i,l=c.left-s.left+c.width/2-this.dragWidth/2-o;requestAnimationFrame((function(){e.setState({top:d,left:l,transitionInProgress:!0})}))}}},{key:"transitionEndHandler",value:function(){var e=this.state,t=e.transitionInProgress,a=e.disabledDrags,r=this.props.onTransitionEnd;t&&(a.indexOf(this.dragToDisable)<0&&a.push(this.dragToDisable),r&&r(),this.dragIndex=-1,this.dropIndex=-1,this.dragToDisable=-1,this.setState({disabledDrags:a,transitionInProgress:!1}))}},{key:"render",value:function(){var e=this.props,t=e.dragContainerSelector,a=e.dropContainerSelector,r=e.scrollContainerSelector,n=document.querySelector("".concat(t)),s=document.querySelector("".concat(a));return this.dragPortal=n,this.dropPortal=s,this.scrollContainerRef=document.querySelector("".concat(r)),m.a.createElement(m.a.Fragment,null,n&&v.a.createPortal(this.drags,n),s&&v.a.createPortal(this.drops,s))}},{key:"drags",get:function(){var e=this,t=this.dragIndex,a=this.props,r=a.items,n=a.dragLabels,s=a.dragClass,i=a.activityId,o=a.placeholderClassName,c=this.state,d=c.top,l=c.left,p=c.transitionInProgress,h=c.disabledDrags,u=c.keyBoardSelected;return this.dragRefs=[],r.map((function(a,r){return m.a.createElement(O,{activityId:i,ariaLabel:n[r],dragSelected:e.dragSelected,focusable:-1===e.dragIndex,mouseDown:e.mouseDownHandler,transitionEnd:e.transitionEndHandler,transitionInProgress:p,index:r,top:d,left:l,grabbed:r===t,detached:r===t&&!u,key:"dragContainer"+r,disabled:h.indexOf(r)>-1,placeholderClassName:o,dragClass:s,ref:function(t){t&&e.dragRefs.indexOf(t)<0&&e.dragRefs.push(t)}},a)}))}},{key:"drops",get:function(){var e=this,t=this.dropIndex,a=this.props,r=a.targets,n=a.dropLabels,s=a.onDropKeyDown,i=a.noHighlightDrops,o=a.dropClass,c=a.activeDropClass,d=a.activityId,l=this.state.disabledDrops,p=-1!==this.dragIndex;return this.dropRefs=[],r.map((function(a,r){return m.a.createElement(j,{dropClass:o?"string"!==typeof o?o[r]:o:null,onDropKeyDown:s,ariaLabel:n[r],dropSelected:e.dropSelected,activityId:d,autoFocus:p&&0===r,focusable:p&&-1===l.indexOf(r)||l.indexOf(r)>-1&&!p,ref:function(t){t&&e.dropRefs.indexOf(t)<0&&e.dropRefs.push(t)},active:t===r&&!i,key:"dropContainer"+r,index:r,disabled:l.indexOf(r)>-1&&!i,activeDropClass:c},a)}))}}]),t}(g.Component),Object(u.a)(s.prototype,"scrollContainer",[w.a],Object.getOwnPropertyDescriptor(s.prototype,"scrollContainer"),s.prototype),s)},592:function(e,t,a){e.exports={cardContentWidth:"800px",primaryColor:"#000",secondaryColor:"#c0c0c0",container:"Activity_container__te3-3",player:"Activity_player__2M65i",response:"Activity_response__3PSEM",correct:"Activity_correct__2cleg",incorrect:"Activity_incorrect__23tHR"}},593:function(e,t,a){e.exports={cardContentWidth:"800px",primaryColor:"#000",secondaryColor:"#c0c0c0",sortingDeckP:"SortingDeck_sortingDeckP__7hYiK",sortingDeckElipsis:"SortingDeck_sortingDeckElipsis__3Q4Sp"}},594:function(e,t,a){e.exports={cardContentWidth:"800px",primaryColor:"#000",secondaryColor:"#c0c0c0",categoryContainer:"DesktopView_categoryContainer__2P54o",centerDeck:"DesktopView_centerDeck__2zTFq",activeDropClass:"DesktopView_activeDropClass__3Lbev"}},595:function(e,t,a){e.exports={cardContentWidth:"800px",primaryColor:"#000",secondaryColor:"#c0c0c0",deckWrapper:"MobileCardDeck_deckWrapper__11cDV",card:"MobileCardDeck_card__1mm8C",card0:"MobileCardDeck_card0__uEAcb",card1:"MobileCardDeck_card1__Deuwd",card2:"MobileCardDeck_card2__2B8ZN",card3:"MobileCardDeck_card3__2Wv2S"}},596:function(e,t,a){e.exports={cardContentWidth:"800px",primaryColor:"#000",secondaryColor:"#c0c0c0",mobileViewContainer:"MobileView_mobileViewContainer__1LsZt",categoryButton:"MobileView_categoryButton__2IomA",selectedButton:"MobileView_selectedButton__1jrYi",categoryContainer:"MobileView_categoryContainer__3equV",categorySelected:"MobileView_categorySelected__3KB24",categoryCounter:"MobileView_categoryCounter__3Fdsg",correct:"MobileView_correct__Lg7kO",wrong:"MobileView_wrong__2KOky",categoryFlexBasis:"MobileView_categoryFlexBasis__3Mnf_"}},597:function(e,t,a){e.exports={cardContentWidth:"800px",primaryColor:"#000",secondaryColor:"#c0c0c0",container:"Controls_container__1cqz6",navigation:"Controls_navigation__29YA4",score:"Controls_score__39lT_",buttons:"Controls_buttons__VWhRr"}}}]);
//# sourceMappingURL=sorting-index.js.map