$.Model("SCPTModel",{},{points:0,currentScore:0,innerState:null,attempts:0,id:"",questionType:"",selectedObject:-1,isChrome:/chrome/.test(navigator.userAgent.toLowerCase()),isIe:/microsoft/.test(navigator.userAgent.toLowerCase()),isIpad:navigator.userAgent.match(/iPad/i),isAndroid:navigator.userAgent.match(/Android/i),backgroundColor:"eeeeee",width:500,height:500,randArrs:{},currentIndex:-1,init:function(jsonObj,params,type){this.containerId=params.containerId,this.maxScore=params.maxScore||jsonObj.value||0,this.id=params.id||(new Date).getTime(),this.questionType=type,this.backgroundColor=params.backgroundColor||jsonObj.color||jsonObj.backgroundcolor||jsonObj.bgcolor||this.backgroundColor,this.width=params.width||this.width,this.height=params.height||this.height,this.correctSound=jsonObj.correctsound instanceof Array?jsonObj.correctsound[0]:jsonObj.correctsound,this.incorrectSound=jsonObj.wrongsound instanceof Array?jsonObj.wrongsound[0]:jsonObj.wrongsound,this.randArrs={},this.showRestart=!0,this.isBigText=jsonObj.largetext||!1,Array.isArray(jsonObj.restarttext)&&(jsonObj.restarttext=jsonObj.restarttext[0]),Array.isArray(jsonObj.resettext)&&(jsonObj.resettext=jsonObj.resettext[0]),this.scoreText=jsonObj.scoretext||jsonObj.scoreText||"Score",this.restartText=jsonObj.restarttext||jsonObj.resettext||"Restart",this.finishText=jsonObj.finishtext||jsonObj.finishText||"Finish",params.showRestart+""=="false"&&(this.showRestart=!1)},setState:function(jsonObj){this.randArrs=jsonObj.randArrs,this.maxScore=jsonObj.maxScore,this.currentScore=jsonObj.curScore,this.attempts=jsonObj.attempts,this.id=jsonObj.id},getState:function(){return{maxScore:this.maxScore,curScore:this.currentScore,attempts:this.attempts,id:this.id,randArrs:this.randArrs}},reinit:function(){this.currentScore=0},getIdByIndex:function(index){return this.questionType+"_"+this.containerId+"_"+index},shuffle:function(arr){for(var j,x,i=arr.length;i;j=parseInt(Math.random()*i,10),x=arr[--i],arr[i]=arr[j],arr[j]=x);return arr},returnRandomOrder:function(number){if(!this.randArrs[number]){for(var arr=[],i=number;i;arr.push(--i));this.randArrs[number]=this.shuffle(arr)}return this.randArrs[number]},decode:function(str,toIgnore){toIgnore=toIgnore||"",str+""=="[object Object]"&&(str="");var s=decodeURIComponent((str+"").replace(/\+/gi," "));return-1!=toIgnore.indexOf("+")&&(s=s.replace(/\+/gi," ")),s=(s=s.replace("&gt;",">")).replace("&lt;","<")}}),SCPTModel("Crossword",{},{init:function(jsonObj,params){if(params.isXML||(jsonObj=this.parseStringToXML(jsonObj)),this._super(jsonObj,params,"crossword"),this.dimensions=[jsonObj.rows||15,jsonObj.columns||15],this.acrosstext=jsonObj.acrosstext,this.downtext=jsonObj.downtext,this.words=jsonObj.words,this.isXML=params.isXML,this.acrossSource=jsonObj.across,this.downSource=jsonObj.down,!this.isXML){for(var wordSize=0,i=this.words.length;i--;)wordSize=Math.max(wordSize,this.words[i].word.length);var maxDim=25;jsonObj.words.length<20&&wordSize<15?maxDim=15:jsonObj.words.length>=20&&jsonObj.words.length<30&&wordSize<20&&(maxDim=20),this.dimensions=[maxDim,maxDim];var newCrossWord=generateCrossword(this.dimensions[0],this.dimensions[1],this.words);this.acrossSource=newCrossWord.across,this.downSource=newCrossWord.down}this.state=new Array(this.dimensions[0]);for(i=0;i<this.state.length;i++)this.state[i]=new Array(this.dimensions[1]);this.dictionary={indexes:[]},void 0==this.acrossSource.word.length&&(this.acrossSource={clue:[this.acrossSource.clue],index:[this.acrossSource.index],word:[{word:this.acrossSource.word.word}],x_pos:[this.acrossSource.x_pos],y_pos:[this.acrossSource.y_pos]}),this.downSource.word||(this.downSource.word=[]),void 0==this.downSource.word.length&&(this.downSource={clue:[this.downSource.clue],index:[this.downSource.index],word:[{word:this.downSource.word.word}],x_pos:[this.downSource.x_pos],y_pos:[this.downSource.y_pos]});for(i=0;i<this.acrossSource.word.length;i++)this.acrossSource.clue[i]=this.decode(this.acrossSource.clue[i]),this.acrossSource.word[i].word=this.decode(this.acrossSource.word[i].word);for(i=0;i<this.downSource.word.length;i++)this.downSource.clue[i]=this.decode(this.downSource.clue[i]),this.downSource.word[i].word=this.decode(this.downSource.word[i].word);this.across=this.orderWords(this.acrossSource,this.dictionary,"across"),this.down=this.orderWords(this.downSource,this.dictionary,"down"),this.direction="down",this.selectedWord=[],this.reinit()},vectors:{up:[0,-1],down:[0,1],left:[-1,0],right:[1,0]},moveInDirection:function(vector){this.activeCell[0]+=vector[0],this.activeCell[1]+=vector[1]},gridHeight:function(){return this.state.length},gridWidth:function(){return this.state[0].length},currentlyAtTopEdge:function(){return 0==this.activeCell[1]},currentlyAtBottomEdge:function(){return this.activeCell[1]==this.gridHeight()-1},currentlyAtLeftEdge:function(){return 0==this.activeCell[0]},currentlyAtRightEdge:function(){return this.activeCell[0]==this.gridWidth()-1},getCellContentsInDirection:function(vector){return this.state[this.activeCell[0]+vector[0]][this.activeCell[1]+vector[1]]},modifiableCellInDirection:function(vector){return-1!=this.getCellContentsInDirection(vector)},canMoveUp:function(){return!this.currentlyAtTopEdge()&&this.modifiableCellInDirection(this.vectors.up)},canMoveDown:function(){return!this.currentlyAtBottomEdge()&&this.modifiableCellInDirection(this.vectors.down)},canMoveLeft:function(){return!this.currentlyAtLeftEdge()&&this.modifiableCellInDirection(this.vectors.left)},canMoveRight:function(){return!this.currentlyAtRightEdge()&&this.modifiableCellInDirection(this.vectors.right)},reinit:function(){if(this._super(),this.keyPressed=[],this.outerDirection=!1,!this.isXML){this.dictionary={indexes:[]};var newCrossWord=generateCrossword(this.dimensions[0],this.dimensions[1],this.words);this.acrossSource=newCrossWord.across,this.downSource=newCrossWord.down;for(var i=0;i<this.acrossSource.word.length;i++)this.acrossSource.clue[i]=this.decode(this.acrossSource.clue[i]),this.acrossSource.word[i].word=this.decode(this.acrossSource.word[i].word);for(i=0;i<this.downSource.word.length;i++)this.downSource.clue[i]=this.decode(this.downSource.clue[i]),this.downSource.word[i].word=this.decode(this.downSource.word[i].word);this.across=this.orderWords(this.acrossSource,this.dictionary,"across"),this.down=this.orderWords(this.downSource,this.dictionary,"down")}this.isFinished=!1,this.pointsArr=new Array(this.dictionary.indexes.length);for(i=0;i<this.state.length;i++)for(var j=0;j<this.state[i].length;j++)this.state[i][j]=-1;for(i=0;i<this.down.length;i++)for(var t=0;t<this.down[i].word.length;t++)this.state[this.down[i].x_pos][this.down[i].y_pos+t]=this.down[i].index+"d";for(i=0;i<this.across.length;i++)for(t=0;t<this.across[i].word.length;t++)this.state[this.across[i].x_pos+t][this.across[i].y_pos]=this.across[i].index+"a";for(i=0;i<this.pointsArr.length;i++)this.pointsArr[i]=0;this.activeCell=[this.dictionary[this.dictionary.indexes[0]].x_pos,this.dictionary[this.dictionary.indexes[0]].y_pos],this.selectedWord.index=1},setState:function(jsonObj){this._super(jsonObj),this.pointsArr=jsonObj.pointsArr,this.state=jsonObj.state},getState:function(jsonObj){var obj=this._super();return obj.pointsArr=this.pointsArr,obj.state=this.state,obj},orderWords:function(jsonObj,dict,direction){for(var h={},obj=[],indArr=[],i=0;i<jsonObj.word.length;i++)indArr.push(jsonObj.index[i]);indArr.sort(function(a,b){return a-b});for(i=0;i<jsonObj.word.length;i++)indArr["s"+jsonObj.index[i]]=i;for(i=0;i<indArr.length;i++)h[indArr[i]]=indArr["s"+indArr[i]];for(var s in h){obj.push({index:s,x_pos:jsonObj.x_pos[h[s]],y_pos:jsonObj.y_pos[h[s]],word:jsonObj.word[h[s]].word,clue:jsonObj.clue[h[s]]});var s1=s+direction[0];dict.indexes.push(s1),dict[s1]={index:s1,x_pos:jsonObj.x_pos[h[s]],y_pos:jsonObj.y_pos[h[s]],word:jsonObj.word[h[s]].word,clue:jsonObj.clue[h[s]],direction:direction}}return obj},parseStringToXML:function(str){for(var retObj={words:[]},params=str.split("&"),i=1;i<params.length-1;i++){var pair=params[i].split("=");pair[1]&&(pair[1]=this.decode(pair[1]));var prefix=pair[0].substring(0,4);if("word"==prefix||"clue"==prefix){var ind=pair[0].substring(4);retObj.words[ind]||(retObj.words[ind]={}),retObj.words[ind][prefix]=pair[1]}else retObj[pair[0]]=pair[1]}return retObj}});var dragNDropModelOptions={defaults:{img:"",labels:[],startCoords:[]}};SCPTModel("DragNDrop",dragNDropModelOptions,{init:function(jsonObj,params){this._super(jsonObj,params,"dragndrop"),this.matchset=jsonObj.matchset;for(var i=0;i<this.matchset.length;i++)this.matchset[i].left=this.decode(this.matchset[i].left),this.matchset[i].right=this.decode(this.matchset[i].right);this.reinit()},reinit:function(){this._super(),this.pointsArr=[];for(var i=0;i<this.matchset.length;i++)this.pointsArr.push(-2)},setState:function(jsonObj){this._super(jsonObj),this.pointsArr=jsonObj.innerState},getState:function(jsonObj){var obj=this._super();return obj.innerState=this.pointsArr,obj}}),SCPTModel("Hotspot",{},{init:function(jsonObj,params){var self=this;this._super(jsonObj,params,"hotspot"),this.image=jsonObj.image,this.imagebase64=jsonObj.imagebase64,this.mask=jsonObj.mask,this.completedText=jsonObj.completedtext,this.correctText=jsonObj.correcttext,this.incorrectText=jsonObj.incorrecttext,this.skipText=jsonObj.skiptext||"Skip",this.mode=jsonObj.mode,this.hint=!1,this.clue=jsonObj.useclue,this.image_clue=jsonObj.clue?jsonObj.clue:"",this.cluebase64=jsonObj.cluebase64?jsonObj.cluebase64:"",this.image_data=["ffffff","ff0000","ff00","ff","ff00ff","ffff00","ffff","c0c0c0","9d0de9","be1326","6b00","69","770000","ff6800","4f9acf","ec00ff","9900","ffcc00","666600","6666","804000"],this.canvas=null,this.randArrs={},this._wrapper_height="quiz"==this.mode?30:0,this.wwidth=jsonObj.width,this.wheight=jsonObj.height,this.task=[],this.task.find=function(color){for(var i=this.length;i--;)if(this[i].color==color){this.current=i;break}},this.reset_text=jsonObj.resettext instanceof Array?jsonObj.resettext[0]:jsonObj.resettext,this._ready=!1,this._overall=1,"true"==this.clue&&this._overall++,this.pointsArr=[];for(var i=21;i--;){var text=jsonObj["hs"+i];text+""==text&&text+""!="[object Object]"&&this.task.push({text:this.decode(text+""),color:self.image_data[i]})}if(this.reinit(),this.task.currentIndex=0,this.task.current=self.returnRandomOrder(self.task.length)[self.task.currentIndex],this.tooltip=this._bubble(parseInt(jsonObj.bubblestyle)),this.workspace_p_h=params.height||0,this.workspace_p_w=params.width||0,this.workspace_i_h=0,this.workspace_i_w=0,this.image_paper={},this.image_mask=new Image,this.image_mask.onload=function(){var canvas=document.createElement("canvas");canvas.width=self.image_mask.width,canvas.height=self.image_mask.height,self.workspace_i_h=this.height,self.workspace_i_w=this.width;var context=canvas.getContext("2d");context.drawImage(self.image_mask,0,0,this.width,this.height),self.imgWidth=this.width,self.image_paper.imageData=context.getImageData(0,0,canvas.width,canvas.height),self.image_paper.task=self.task,self.image_paper.tooltip=self.tooltip,self._overall--,self._overall||(self._ready=!0)},this.image_mask.src=this.maskbase64?this.maskbase64:this.mask,this.image_mask.qstn=self,"true"==this.clue){var _image_clue=new Image;_image_clue.onload=function(){self._overall--,self._overall||(self._ready=!0)},_image_clue.src=this.cluebase64?this.cluebase64:this.image_clue}},reinit:function(){this._super(),this.pointsArr=[];for(var i=0;i<this.task.length;i++)this.pointsArr.push(-1);this.randArrs=[],this.task.currentIndex=0},setState:function(jsonObj){this._super(jsonObj),this.pointsArr=jsonObj.innerState},getState:function(jsonObj){var obj=this._super();return obj.innerState=this.pointsArr,obj},rgb_to_hex:function(r,g,b){return r>255||g>255||b>255?"ffffff":(r<<16|g<<8|b).toString(16)},_unbind:{quiz:function(image){image.unbind("click")},explore:function(image){image.unbind("mousemove")}},_get_image_data:function(crds,self){var i=parseInt(4*(crds.y*this.imageData.width+crds.x)),data=this.imageData.data;return self.rgb_to_hex(data[i],data[i+1],data[i+2])},_get_coords:function(evt){var posx=0,posy=0;(evt=evt||w$.evt).pageX||evt.pageY?(posx=evt.pageX,posy=evt.pageY):(evt.clientX||evt.clientY)&&(posx=evt.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,posy=evt.clientY+document.body.scrollTop+document.documentElement.scrollTop),evt.changedTouches&&(posx=evt.changedTouches[0].pageX,posy=evt.changedTouches[0].pageY);var offset=$(evt.target).offset();return{x:parseInt(posx-offset.left),y:parseInt(posy-offset.top)}},_bubble:function(num){var model=this["_bubble_"+num](),bubble=$(model.html);for(var i in delete model.html,model)bubble[i]=model[i];return bubble.content=bubble.find("div.sc-hp-content"),9!=num&&bubble.content.css("position","absolute"),bubble._type=num,bubble.update=function(dh,dv){var sx=dh?"":"-",sy=dv?"-":"",dx=dh?0:this.w,dy=dv?0:this.h,tx=dh?this.tx_l:this.tx_r,ty=dv?this.ty_t:this.ty_b;return this.find("g").attr("transform","matrix( "+sx+this.scale_x+", 0, 0, "+sy+this.scale_y+", "+dx+", "+dy+")"),this.content.css({left:tx+"px",top:ty+"px"}),this},bubble},_bubble_1:function(){return{html:'<div class="sc-hp-tooltip" style="width:160px;height:80px"><style type="text/css"> .sc-hp-inner {width:100%;height:100%;border:1px solid #000000;background:#ffffff}</style><div class="sc-hp-inner"><div class="sc-hp-content" style="width:150px;height:70px;border:0;paddin:0;margin:5px;"></div></div></div>',w:160,h:80,tx_l:0,tx_r:0,ty_b:0,ty_t:0,scale_x:1,scale_y:1}},_bubble_2:function(){return{html:'<div class="sc-hp-tooltip" style="width:153px;height:58px"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="100%" height="100%" style="width: 100%; height: 100%" xml:space="preserve"><style type="text/css"> .sc-hp-outer {fill:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:3;stroke:#333333;stroke-opacity:1} .sc-hp-inner {fill:#FFFFCC;fill-opacity:1}</style><g transform="matrix( 1, 0, 0, 1, 0, 0)"><path class="sc-hp-inner" d="M2 -2L7.3 -13.2L7.3 -49.5Q7.25 -57 14.6 -57L145.5 -57Q152.8 -57 152.85 -49.5L152.85 -13.2Q152.8 -5.7 145.5 -5.7L14.6 -5.7L2 -2" /><path class="sc-hp-outer" d="M14.6 -5.7L145.5 -5.7Q152.8 -5.7 152.85 -13.2L152.85 -49.5Q152.8 -57 145.5 -57L14.6 -57Q7.25 -57 7.3 -49.5L7.3 -13.2 M7.3 -13.2L2 -2L14.6 -5.7" /></g></svg><div class="sc-hp-content" style="top: 0px; left: 0px; width: 135px; height: 50px;"></div></div>',w:153,h:58,tx_l:13,tx_r:6,ty_b:2,ty_t:6,scale_x:1,scale_y:1}},_bubble_3:function(){return{html:'<div class="sc-hp-tooltip" style="width:202px;height:80px"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="100%" height="100%" style="width: 100%; height: 100%" xml:space="preserve"><style type="text/css"> .sc-hp-outer {fill:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:3;stroke:#000000;stroke-opacity:1} .sc-hp-inner {fill:#FFFFFF;fill-opacity:1}</style><g transform="matrix( 1, 0, 0, 1, 0, 0)"><path class="sc-hp-inner" d="M162.4 -65.75L167.55 -66Q181.15 -66 190.8 -60.5Q200.4 -55 200.4 -47.25Q200.4 -39.5 190.8 -34L187.8 -32.45L188.15 -29.35Q188.15 -20.1 176.7 -13.55Q165.2 -7 149.05 -7Q136.8 -7 127.25 -10.75Q117.15 -7.85 105.05 -7.85Q85.75 -7.85 71.8 -15.1Q67.1 -14 61.6 -14Q50.15 -14 42.15 -18.65Q33.95 -23.25 34 -29.75Q34 -33.45 36.65 -36.55L34.95 -37.5Q27.1 -41.95 27.1 -48.25Q27.1 -54.55 34.95 -59.05Q42.75 -63.5 53.8 -63.5L61.15 -62.95Q62.55 -67.35 68.5 -70.75Q76.2 -75.15 87.15 -75.15Q97.4 -75.15 104.9 -71.25Q106.4 -72.5 108.4 -73.6Q117.85 -79 131.25 -79Q144.65 -79 154.2 -73.6Q160.2 -70.15 162.4 -65.75" /><path class="sc-hp-outer" d="M154.2 -73.6Q144.65 -79 131.25 -79Q117.85 -79 108.4 -73.6Q106.4 -72.5 104.9 -71.25Q97.4 -75.15 87.15 -75.15Q76.2 -75.15 68.5 -70.75Q62.55 -67.35 61.15 -62.95L53.8 -63.5Q42.75 -63.5 34.95 -59.05Q27.1 -54.55 27.1 -48.25Q27.1 -41.95 34.95 -37.5L36.65 -36.55Q34 -33.45 34 -29.75Q33.95 -23.25 42.15 -18.65Q50.15 -14 61.6 -14Q67.1 -14 71.8 -15.1Q85.75 -7.85 105.05 -7.85Q117.15 -7.85 127.25 -10.75Q136.8 -7 149.05 -7Q165.2 -7 176.7 -13.55Q188.15 -20.1 188.15 -29.35L187.8 -32.45L190.8 -34Q200.4 -39.5 200.4 -47.25Q200.4 -55 190.8 -60.5Q181.15 -66 167.55 -66L162.4 -65.75Q160.2 -70.15 154.2 -73.6z" /><path class="sc-hp-inner" d="M9.65 -5.5Q9.65 -4.6 8.8 -4Q8 -3.35 6.85 -3.35Q5.65 -3.35 4.75 -4Q4 -4.6 4 -5.5Q4 -6.4 4.75 -7.05Q5.65 -7.65 6.85 -7.65Q8 -7.65 8.8 -7.05Q9.65 -6.4 9.65 -5.5" /><path class="sc-hp-outer" d="M9.65 -5.5Q9.65 -4.6 8.8 -4Q8 -3.35 6.85 -3.35Q5.65 -3.35 4.75 -4Q4 -4.6 4 -5.5Q4 -6.4 4.75 -7.05Q5.65 -7.65 6.85 -7.65Q8 -7.65 8.8 -7.05Q9.65 -6.4 9.65 -5.5z" /><path class="sc-hp-inner" d="M12.4 -13.7Q13.65 -14.65 15.45 -14.65Q17.2 -14.65 18.45 -13.7Q19.75 -12.75 19.75 -11.4Q19.75 -10.05 18.45 -9.1Q17.2 -8.15 15.45 -8.15Q13.65 -8.15 12.4 -9.1Q11.15 -10.05 11.15 -11.4Q11.15 -12.75 12.4 -13.7" /><path class="sc-hp-outer" d="M12.4 -13.7Q13.65 -14.65 15.45 -14.65Q17.2 -14.65 18.45 -13.7Q19.75 -12.75 19.75 -11.4Q19.75 -10.05 18.45 -9.1Q17.2 -8.15 15.45 -8.15Q13.65 -8.15 12.4 -9.1Q11.15 -10.05 11.15 -11.4Q11.15 -12.75 12.4 -13.7z" /><path class="sc-hp-inner" d="M36.4 -15.75Q36.2 -13.05 33.7 -11.95Q31.2 -10.85 27.95 -12.05Q26.5 -12.6 25.3 -13.45Q23.75 -14.55 22.6 -16.1Q21.3 -17.7 20.85 -19.25Q20.45 -20.5 20.6 -21.7Q20.85 -24.45 23.35 -25.5Q25.8 -26.6 29.05 -25.4Q32.35 -24.2 34.55 -21.35Q36.65 -18.5 36.4 -15.75" /><path class="sc-hp-outer" d="M36.4 -15.75Q36.2 -13.05 33.7 -11.95Q31.2 -10.85 27.95 -12.05Q26.5 -12.6 25.3 -13.45Q23.75 -14.55 22.6 -16.1Q21.3 -17.7 20.85 -19.25Q20.45 -20.5 20.6 -21.7Q20.85 -24.45 23.35 -25.5Q25.8 -26.6 29.05 -25.4Q32.35 -24.2 34.55 -21.35Q36.65 -18.5 36.4 -15.75z" /></g></svg><div class="sc-hp-content" style="top: 0px; left: 0px; width: 135px; height: 50px;"></div></div>',w:202,h:80,tx_l:44,tx_r:22,ty_b:16,ty_t:15,scale_x:1,scale_y:1}},_bubble_4:function(){return{html:'<div class="sc-hp-tooltip" style="width:212px;height:71px"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="100%" height="100%" style="width: 100%; height: 100%" xml:space="preserve"><style type="text/css"> .sc-hp-outer {fill:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:3;stroke:#000000;stroke-opacity:1} .sc-hp-inner {fill:#FFFFFF;fill-opacity:1}</style><g transform="matrix( 1, 0, 0, 1, 0, 0)"><path class="sc-hp-inner" d="M40 -13.55L0 -0.3L27.9 -18.1L28.4 -18.05L13.9 -18.8L19.25 -23.15L5.5 -24.85L13.4 -28.75L0.9 -31.25L11.1 -34.65L0.35 -37.85L12.45 -40.55L3.9 -44.35L17.3 -46.2L11.25 -50.5L25.55 -51.5L22.25 -56.1L36.9 -56.15L36.4 -60.9L50.85 -60.05L53.2 -64.65L66.8 -63L72 -67.4L84.3 -64.85L92.05 -68.85L102.6 -65.6L112.65 -69L121 -65.2L132.9 -67.9L138.8 -63.6L152.1 -65.5L155.3 -60.95L169.55 -62L169.85 -57.35L184.55 -57.5L181.9 -52.85L196.4 -52.1L191.05 -47.75L204.8 -46.05L196.9 -42.15L209.4 -39.65L199.2 -36.25L209.95 -33.05L197.85 -30.4L206.5 -26.55L193 -24.7L199.05 -20.4L184.75 -19.4L188.1 -14.8L173.45 -14.75L173.9 -10L159.5 -10.85L157.1 -6.25L143.5 -7.9L138.3 -3.5L126.05 -6.05L118.25 -2.05L107.7 -5.35L97.7 -1.9L89.3 -5.8L77.4 -3L71.55 -7.3L58.2 -5.4L55 -9.95L40.75 -8.9L40.5 -13.55L40 -13.55M28.4 -18.05L27.9 -18.1" /><path class="sc-hp-outer" d="M40 -13.55L0 -0.3L27.9 -18.1L13.9 -18.8L19.25 -23.15L5.5 -24.85L13.4 -28.75L0.9 -31.25L11.1 -34.65L0.35 -37.85L12.45 -40.55L3.9 -44.35L17.3 -46.2L11.25 -50.5L25.55 -51.5L22.25 -56.1L36.9 -56.15L36.4 -60.9L50.85 -60.05L53.2 -64.65L66.8 -63L72 -67.4L84.3 -64.85L92.05 -68.85L102.6 -65.6L112.65 -69L121 -65.2L132.9 -67.9L138.8 -63.6L152.1 -65.5L155.3 -60.95L169.55 -62L169.85 -57.35L184.55 -57.5L181.9 -52.85L196.4 -52.1L191.05 -47.75L204.8 -46.05L196.9 -42.15L209.4 -39.65L199.2 -36.25L209.95 -33.05L197.85 -30.4L206.5 -26.55L193 -24.7L199.05 -20.4L184.75 -19.4L188.1 -14.8L173.45 -14.75L173.9 -10L159.5 -10.85L157.1 -6.25L143.5 -7.9L138.3 -3.5L126.05 -6.05L118.25 -2.05L107.7 -5.35L97.7 -1.9L89.3 -5.8L77.4 -3L71.55 -7.3L58.2 -5.4L55 -9.95L40.75 -8.9L40.5 -13.55 M28.4 -18.05L27.9 -18.1" /></g></svg><div class="sc-hp-content" style="top: 0px; left: 0px; width: 120px; height: 50px;"></div></div>',w:212,h:71,tx_l:44,tx_r:48,ty_b:10,ty_t:10,scale_x:1,scale_y:1}},_bubble_5:function(){return{html:'<div class="sc-hp-tooltip" style="width:155px;height:81px"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="100%" height="100%" style="width: 100%; height: 100%" xml:space="preserve"><style type="text/css"> .sc-hp-outer {fill:#000000;fill-opacity:1} .sc-hp-inner {fill:#ffffff;fill-opacity:1}</style><g transform="matrix( 0.7, 0, 0, 0.7, 0, 0)"><path class="sc-hp-outer" d="M29.65 -107.35Q118.3 -122 206.95 -107.35L207.25 -107.2L207.45 -106.95Q229.55 -61.9 207.45 -16.8L207.25 -16.6L206.95 -16.45Q112.9 -0.75 29.9 -16.4L3.05 -1.55L2.55 -1.5L2.15 -1.75L2.05 -2.3L2.25 -2.8L25.4 -29.05Q15.25 -67.95 29.1 -106.85L29.35 -107.2L29.65 -107.35M25.85 -27.3L6.15 -5.05L29.45 -17.9L29.55 -17.95L29.85 -18Q112.65 -2.4 206.45 -17.95Q227.85 -61.9 206.45 -105.8Q118.35 -120.35 30.25 -105.85Q16.75 -67.45 26.85 -29.05L26.8 -28.45L26.4 -28.05L25.85 -28.1L25.5 -28.6L25.85 -27.3" /><path class="sc-hp-inner" d="M25.5 -28.6L25.85 -28.1L26.4 -28.05L26.8 -28.45L26.85 -29.05Q16.75 -67.45 30.25 -105.85Q118.35 -120.35 206.45 -105.8Q227.85 -61.9 206.45 -17.95Q112.65 -2.4 29.85 -18L29.55 -17.95L29.45 -17.9L6.15 -5.05L25.85 -27.3L25.5 -28.6" /></g></svg><div class="sc-hp-content" style="top: 0px; left: 0px; width: 120px; height: 60px;"></div></div>',w:155,h:81,tx_l:23,tx_r:13,ty_b:8,ty_t:13,scale_x:.7,scale_y:.7}},_bubble_6:function(){return{html:'<div class="sc-hp-tooltip" style="width:189px;height:76px"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="100%" height="100%" style="width: 100%; height: 100%" xml:space="preserve"><style type="text/css"> .sc-hp-outer {fill:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:3;stroke:#000000;stroke-opacity:1} .sc-hp-inner {fill:#ffffff;fill-opacity:1}</style><g transform="matrix( 1, 0, 0, 1, 0, 0)"><path class="sc-hp-inner" d="M 187.9 -75.5 Q 165.65 -42.4 171.95 -1.6 Q 92.15 -17.45 1 -8.05 Q 20.9 -36.95 12.4 -60.5 Q 102.15 -62.4 187.9 -75.5" /><path class="sc-hp-outer" d="M 187.9 -75.5 Q 165.65 -42.4 171.95 -1.6 Q 92.15 -17.45 1 -8.05 Q 20.9 -36.95 12.4 -60.5 Q 102.15 -62.4 187.9 -75.5" /></g></svg><div class="sc-hp-content" style="top: 0px; left: 0px; width: 150px; height: 50px;"></div></div>',w:189,h:76,tx_l:16,tx_r:20,ty_b:15,ty_t:10,scale_x:1,scale_y:1}},_bubble_7:function(){return{html:'<div class="sc-hp-tooltip" style="width:197px;height:75px"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="100%" height="100%" style="width: 100%; height: 100%" xml:space="preserve"><style type="text/css"> .sc-hp-outer {fill:#000000;fill-opacity:1} .sc-hp-inner {fill:#ffffff;fill-opacity:1}</style><g transform="matrix( 1, 0, 0, 1, 0, 0)"><path class="sc-hp-inner" d="M74.2 -71.15L80.4 -72Q80.45 -71.75 80.65 -71.6Q80.8 -71.4 81.05 -71.45L88.5 -72.2L88.95 -72.4L89.05 -72.9L95.2 -73.25Q95.2 -73 95.45 -72.85Q95.55 -72.7 95.85 -72.7L103.25 -72.95Q103.5 -72.95 103.65 -73.15L103.85 -73.6L108.65 -73.65L110.35 -73.65L110.55 -73.2Q110.75 -73 111 -73L118.6 -72.85L119.05 -72.95L119.2 -73.4L125.45 -73.1L125.45 -73L125.65 -72.6Q125.8 -72.4 126.1 -72.4L133.5 -71.75L134 -71.9L134.2 -72.35L140.45 -71.5Q140.4 -71.25 140.6 -71.1Q140.7 -70.9 141 -70.85L148.3 -69.6L148.8 -69.7L149.05 -70.1L155.25 -68.75Q155.15 -68.55 155.3 -68.3Q155.45 -68.05 155.7 -68L162.85 -66.05L163.35 -66.15L163.7 -66.5L169.7 -64.55L169.7 -64.5Q169.55 -64.25 169.7 -64L170.05 -63.7L171.2 -63.3L177.35 -60.8L177.85 -60.75L178.15 -61.1L184 -58.1Q183.8 -57.9 183.9 -57.65L184.15 -57.3Q187.65 -55.2 190.25 -52.95L190.65 -52.85Q190.85 -52.85 191.05 -53.05Q193.6 -50.7 195.1 -48.15L194.85 -47.75Q194.7 -47.6 194.9 -47.35Q196.7 -44 196.7 -40.45L196.9 -40Q197.1 -39.8 197.35 -39.8Q197.3 -37.75 196.6 -35.8L196.1 -35.8L195.8 -35.4Q194.55 -32.35 191.85 -29.55L191.65 -29.1L191.85 -28.65L191.9 -28.6Q189.85 -26.65 187.15 -24.7L186.75 -25L186.3 -24.9L180 -21.3L179.65 -20.95L179.65 -20.45L174.2 -18L174.1 -18.05L173.8 -18.35L173.3 -18.35L171.2 -17.5L167.1 -16.05L166.75 -15.75Q166.6 -15.55 166.75 -15.3L160.75 -13.5L160.45 -13.8L160 -13.85L152.75 -12.15Q152.5 -12.1 152.4 -11.85L152.25 -11.4L146.15 -10.25L145.9 -10.6L145.45 -10.75L138 -9.6L137.6 -9.35L137.45 -8.9L131.2 -8.2L131 -8.55L130.5 -8.7L123.1 -8.2Q122.8 -8.2 122.65 -7.95L122.45 -7.6L116.2 -7.3L116.05 -7.7L115.6 -7.9L108.65 -7.85L108.15 -7.85L107.75 -7.65L107.55 -7.2L101.15 -7.3L101.05 -7.8L100.6 -7.95L93.05 -8.3Q92.75 -8.3 92.6 -8.1L92.35 -7.7L86.05 -8.2L85.95 -8.65L85.5 -8.9L78 -9.8L77.5 -9.65L77.25 -9.2L71.05 -10.25L70.95 -10.65L70.55 -11L63.15 -12.5L62.7 -12.35L62.4 -12L56.35 -13.55L56.25 -14.05L55.9 -14.3L51.95 -15.5L51.85 -15.5L51.6 -15.6L50.25 -15.25L49.4 -15L49.55 -14.95L45.7 -13.8L45.35 -13.5L45.35 -13.4L39.15 -11.5L38.95 -11.65L38.45 -11.65L31.25 -9.55L30.85 -9.3L30.8 -8.9L24.75 -7.1L24.5 -7.4L24 -7.4L16.75 -5.25L16.35 -5L16.35 -4.5L10.3 -2.7L10.3 -2.75L10 -3.15L9.5 -3.15L7.5 -2.6L11.35 -4.75L11.7 -5.15L11.7 -5.4L17.2 -8.55L17.5 -8.35L17.95 -8.4L24.4 -12.15L24.75 -12.55L24.65 -12.9L30.05 -16.1L30.1 -16.05L30.5 -15.75L30.9 -15.8L37.4 -19.45L37.65 -19.75L37.7 -19.7L37.95 -20.5L38.1 -20.95L34.35 -22.9L33.85 -22.9L33.55 -22.65L29.3 -25.4L28.25 -26.15L28.35 -26.65L28.15 -27.1Q24.9 -29.7 23.1 -32.45L22.65 -32.8L22.25 -32.65Q20.5 -35.6 20.1 -38.7Q20.35 -38.75 20.55 -38.95L20.65 -39.35L20.6 -40.45Q20.6 -43.45 21.9 -46.25L22 -46.7L21.6 -47.1Q22.9 -49.65 25.3 -52.05Q25.5 -51.85 25.75 -51.85Q26 -51.85 26.15 -52.05Q28.5 -54.3 31.85 -56.4L32.1 -56.85L32.05 -57.3Q34.4 -58.8 37.3 -60.25L37.3 -60.2L37.65 -59.85L38.15 -59.9Q41.2 -61.45 44.85 -62.8L45.15 -63.2L45.2 -63.6L45.95 -63.95L51.45 -65.8Q51.5 -65.55 51.75 -65.45L52.2 -65.4L59.25 -67.4L59.65 -67.7L59.7 -68.15L59.7 -68.2L65.65 -69.6L65.95 -69.15L66.4 -69.05L73.7 -70.45L74.05 -70.7L74.2 -71.15" /><path class="sc-hp-outer" d="M103.65 -73.15Q103.5 -72.95 103.25 -72.95L95.85 -72.7Q95.55 -72.7 95.45 -72.85Q95.2 -73 95.2 -73.25Q95.2 -73.6 95.35 -73.7L95.8 -73.95L103.25 -74.2L103.65 -74.05L103.85 -73.6L103.65 -73.15M119.05 -72.95L118.6 -72.85L111 -73Q110.75 -73 110.55 -73.2L110.35 -73.65L110.55 -74.1Q110.75 -74.3 111 -74.3L118.65 -74.1L119.1 -73.9L119.2 -73.4L119.05 -72.95M134 -71.9L133.5 -71.75L126.1 -72.4Q125.8 -72.4 125.65 -72.6L125.45 -73L125.45 -73.1L125.7 -73.45L126.15 -73.65L133.65 -73L134.1 -72.75L134.2 -72.35L134 -71.9M148.8 -69.7L148.3 -69.6L141 -70.85Q140.7 -70.9 140.6 -71.1Q140.4 -71.25 140.45 -71.5L140.7 -71.95L141.2 -72.1L148.55 -70.85L148.95 -70.5L149.05 -70.1L148.8 -69.7M163.35 -66.15L162.85 -66.05L155.7 -68Q155.45 -68.05 155.3 -68.3Q155.15 -68.55 155.25 -68.75L155.5 -69.15L156 -69.2Q159.7 -68.4 163.25 -67.25L163.6 -66.95L163.7 -66.5L163.35 -66.15M177.85 -60.75L177.35 -60.8L171.2 -63.3L170.05 -63.7L169.7 -64Q169.55 -64.25 169.7 -64.5L169.7 -64.55L170 -64.9L170.45 -64.9L171.55 -64.5L171.6 -64.5L177.85 -61.95L178.25 -61.55L178.15 -61.1L177.85 -60.75M190.65 -52.85L190.25 -52.95Q187.65 -55.2 184.15 -57.3L183.9 -57.65Q183.8 -57.9 184 -58.1L184 -58.15L184.35 -58.4L184.8 -58.35Q188.4 -56.25 191.05 -53.9L191.25 -53.45L191.1 -53.05L191.05 -53.05Q190.85 -52.85 190.65 -52.85M196.9 -40L196.7 -40.45Q196.7 -44 194.9 -47.35Q194.7 -47.6 194.85 -47.75L195.1 -48.15L195.6 -48.2L195.95 -47.95Q197.95 -44.4 197.95 -40.45L197.8 -40L197.35 -39.8Q197.1 -39.8 196.9 -40M191.85 -28.65L191.65 -29.1L191.85 -29.55Q194.55 -32.35 195.8 -35.4L196.1 -35.8L196.6 -35.8L196.9 -35.5L196.95 -35Q195.65 -31.7 192.7 -28.65L192.3 -28.45Q192.05 -28.45 191.9 -28.6L191.85 -28.65M179.65 -20.95L180 -21.3L186.3 -24.9L186.75 -25L187.15 -24.7L187.25 -24.25L187 -23.85Q184.1 -21.95 180.55 -20.2L180.05 -20.15L179.65 -20.45L179.65 -20.95M166.75 -15.75L167.1 -16.05L171.2 -17.5L173.3 -18.35L173.8 -18.35L174.1 -18.05L174.2 -18L174.1 -17.55L173.8 -17.25L171.6 -16.3L167.5 -14.85L167.05 -14.95L166.75 -15.3Q166.6 -15.55 166.75 -15.75M152.4 -11.85Q152.5 -12.1 152.75 -12.15L160 -13.85L160.45 -13.8L160.75 -13.5L160.75 -13.4L160.7 -13Q160.5 -12.75 160.3 -12.65L153 -10.9L152.55 -11L152.25 -11.4L152.4 -11.85M137.6 -9.35L138 -9.6L145.45 -10.75L145.9 -10.6L146.15 -10.25L146.15 -10.15L146 -9.7L145.65 -9.45L138.2 -8.35L137.7 -8.45L137.45 -8.85L137.45 -8.9L137.6 -9.35M122.65 -7.95Q122.8 -8.2 123.1 -8.2L130.5 -8.7L131 -8.55L131.2 -8.2L131.2 -8.15L131.1 -7.65Q130.9 -7.45 130.65 -7.45L123.15 -6.95Q122.85 -6.95 122.7 -7.1L122.45 -7.55L122.45 -7.6L122.65 -7.95M107.75 -7.65L108.15 -7.85L108.65 -7.85L115.6 -7.9L116.05 -7.7L116.2 -7.3L116.05 -6.85L115.6 -6.65L108.65 -6.6L108.15 -6.6Q107.9 -6.6 107.75 -6.8L107.55 -7.2L107.75 -7.65M92.6 -8.1Q92.75 -8.3 93.05 -8.3L100.6 -7.95L101.05 -7.8L101.15 -7.3L101 -6.85L100.55 -6.7L93 -7.05Q92.7 -7.05 92.55 -7.2L92.35 -7.65L92.35 -7.7L92.6 -8.1M77.5 -9.65L78 -9.8L85.5 -8.9L85.95 -8.65L86.05 -8.2L85.85 -7.8L85.35 -7.65L77.8 -8.55L77.4 -8.8Q77.2 -8.95 77.25 -9.2L77.5 -9.65M62.7 -12.35L63.15 -12.5L70.55 -11L70.95 -10.65L71.05 -10.25L70.8 -9.85L70.3 -9.7L62.9 -11.25L62.5 -11.5L62.4 -12L62.7 -12.35M45.35 -13.5L45.7 -13.8L49.55 -14.95L49.4 -15L50.25 -15.25L51.6 -15.6L51.85 -15.5L51.95 -15.5L55.9 -14.3L56.25 -14.05L56.35 -13.55L56 -13.15L55.6 -13.1Q53.45 -13.65 51.45 -14.3L51.15 -14.4L51.1 -14.3L50.7 -14L46.1 -12.6L45.65 -12.65L45.35 -13.05Q45.2 -13.25 45.35 -13.4L45.35 -13.5M30.85 -9.3L31.25 -9.55L38.45 -11.65L38.95 -11.65L39.15 -11.5L39.3 -11.3L39.2 -10.8L38.85 -10.5L31.6 -8.35L31.1 -8.4L30.85 -8.8L30.8 -8.9L30.85 -9.3M16.35 -5L16.75 -5.25L24 -7.4L24.5 -7.4L24.75 -7.1L24.8 -7.05L24.75 -6.55L24.35 -6.2L17.1 -4.1L16.6 -4.15L16.35 -4.5L16.35 -5M11.7 -5.15L11.35 -4.75L7.5 -2.6L9.5 -3.15L10 -3.15L10.3 -2.75L10.3 -2.7L10.25 -2.25L9.85 -1.95L2.7 0.2L2.25 0.1L1.95 -0.25Q1.8 -0.5 1.95 -0.7L2.3 -1L4.35 -1.65L4.35 -1.95L4.6 -2.35L10.75 -5.85L11.25 -5.9L11.6 -5.65L11.7 -5.4L11.7 -5.15M24.75 -12.55L24.4 -12.15L17.95 -8.4L17.5 -8.35L17.2 -8.55L17.1 -8.65Q16.95 -8.9 17.05 -9.1L17.3 -9.45L23.8 -13.25L24.3 -13.3L24.65 -13.05L24.65 -12.9L24.75 -12.55M33.85 -22.9L34.35 -22.9L38.1 -20.95L37.95 -20.5L37.7 -19.7L37.65 -19.75L37.4 -19.45L30.9 -15.8L30.5 -15.75L30.1 -16.05L30.05 -16.1L30.05 -16.5L30.3 -16.85L36.45 -20.3L33.75 -21.75L33.5 -22.15Q33.35 -22.4 33.55 -22.65L33.85 -22.9M22.65 -32.8L23.1 -32.45Q24.9 -29.7 28.15 -27.1L28.35 -26.65L28.25 -26.15L27.8 -25.95L27.35 -26.1Q23.9 -28.85 22.05 -31.8L21.9 -32.3L22.25 -32.65L22.65 -32.8M22 -46.7L21.9 -46.25Q20.6 -43.45 20.6 -40.45L20.65 -39.35L20.55 -38.95Q20.35 -38.75 20.1 -38.7L19.65 -38.8L19.4 -39.25L19.35 -40.45Q19.35 -43.7 20.8 -46.75L21.15 -47.1L21.6 -47.1L22 -46.7M32.1 -56.85L31.85 -56.4Q28.5 -54.3 26.15 -52.05Q26 -51.85 25.75 -51.85Q25.5 -51.85 25.3 -52.05L25.1 -52.45L25.3 -52.9Q27.75 -55.3 31.15 -57.5L31.6 -57.6L32.05 -57.3L32.1 -56.85M45.15 -63.2L44.85 -62.8Q41.2 -61.45 38.15 -59.9L37.65 -59.85L37.3 -60.2L37.3 -60.25Q37.15 -60.5 37.3 -60.7L37.6 -61.05L44.4 -64L44.85 -64L45.2 -63.6L45.15 -63.2M59.7 -68.15L59.65 -67.7L59.25 -67.4L52.2 -65.4L51.75 -65.45Q51.5 -65.55 51.45 -65.8L51.45 -66.25L51.85 -66.55L58.95 -68.55L59.4 -68.5L59.7 -68.2L59.7 -68.15M74.05 -70.7L73.7 -70.45L66.4 -69.05L65.95 -69.15L65.65 -69.6Q65.55 -69.85 65.75 -70L66.15 -70.35L73.5 -71.7L73.95 -71.6L74.2 -71.15L74.05 -70.7M88.95 -72.4L88.5 -72.2L81.05 -71.45Q80.8 -71.4 80.65 -71.6Q80.45 -71.75 80.4 -72Q80.3 -72.25 80.5 -72.45L80.95 -72.7L88.35 -73.45L88.85 -73.25L89.05 -72.9L88.95 -72.4" /></g></svg><div class="sc-hp-content" style="top: 0px; left: 0px; width: 120px; height: 50px;"></div></div>',w:197,h:75,tx_l:45,tx_r:30,ty_b:10,ty_t:15,scale_x:1,scale_y:1}},_bubble_8:function(){return{html:'<div class="sc-hp-tooltip" style="width:221px;height:117px"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="100%" height="100%" style="width: 100%; height: 100%" xml:space="preserve"><style type="text/css"> .sc-hp-outer {fill:#000000;fill-opacity:1} .sc-hp-inner {fill:#ffffff;fill-opacity:1}</style><g transform="matrix( 1, 0, 0, 1, 0, 0)"><path class="sc-hp-outer" d="M29.65 -107.35Q118.3 -122 206.95 -107.35L207.25 -107.2L207.45 -106.95Q229.55 -61.9 207.45 -16.8L207.25 -16.6L206.95 -16.45Q112.9 -0.75 29.9 -16.4L3.05 -1.55L2.55 -1.5L2.15 -1.75L2.05 -2.3L2.25 -2.8L25.4 -29.05Q15.25 -67.95 29.1 -106.85L29.35 -107.2L29.65 -107.35M25.85 -27.3L6.15 -5.05L29.45 -17.9L29.55 -17.95L29.85 -18Q112.65 -2.4 206.45 -17.95Q227.85 -61.9 206.45 -105.8Q118.35 -120.35 30.25 -105.85Q16.75 -67.45 26.85 -29.05L26.8 -28.45L26.4 -28.05L25.85 -28.1L25.5 -28.6L25.85 -27.3" /><path class="sc-hp-inner" d="M25.5 -28.6L25.85 -28.1L26.4 -28.05L26.8 -28.45L26.85 -29.05Q16.75 -67.45 30.25 -105.85Q118.35 -120.35 206.45 -105.8Q227.85 -61.9 206.45 -17.95Q112.65 -2.4 29.85 -18L29.55 -17.95L29.45 -17.9L6.15 -5.05L25.85 -27.3L25.5 -28.6" /></g></svg><div class="sc-hp-content" style="top: 0px; left: 0px; width: 180px; height: 85px;"></div></div>',w:221,h:117,tx_l:28,tx_r:13,ty_b:13,ty_t:20,scale_x:1,scale_y:1}},_bubble_9:function(){return{html:'<div class="sc-hp-tooltip" style="width:100%;bottom:-50px;"><table style="width:100%"><tr><td align="center"><div class="sc-hp-content" style="border:1px solid #000000;background:#ffffff;padding:5px;margin:0;"></div></td></tr></table></div>',w:0,h:0,tx_l:0,tx_r:0,ty_b:0,ty_t:0,scale_x:0,scale_y:0}}}),SCPTModel("iAlbum",{},{init:function(jsonObj,params){this.params=params,this.current=0,this._ready=!1,this._super(jsonObj,params,"photoalbum"),this.bgcolor="#"+(jsonObj.color.replace(/#/g,"")||this.backgroundColor.replace(/#/g,"")),this.textAlign=params.textAlign||"left",this.photo=jsonObj.photo.length?jsonObj.photo:[jsonObj.photo];for(var len=this.photo.length,num=0,self=this,i=this.photo.length;i--;){this.photo[i].caption=this.decode(this.photo[i].caption+"");var img=new Image;img.src=this.photo[i].url,img.onload=function(obj){return function(){var h=parseInt(this.height),w=parseInt(this.width);(h>430||w>600)&&(600/430<w/h?h*=600/(w*=600/w):(w*=430/h,h*=430/h)),obj.w=w,obj.h=h,++num==len&&(self._ready=!0)}}(this.photo[i])}}}),SCPTModel("iChart",{},{init:function(jsonObj,params){this.params=params,this.radius=170,this.height=430,this._super(jsonObj,params,"sectionedshape"),this.type=jsonObj.shapetype||"circle",this.section=[],this.t={circle:[185,225],pyramid:[10,10]},this.marker={min:20,max:400},this.title=this.decode(jsonObj.directionslabel),this.descr=this.decode(jsonObj.directionstext);var auto;overall=0,num=0,sub_overall=0,sub_num=0,val=0,sub=null,s_val=0,jsonObj.shapesection.length||(jsonObj.shapesection=[jsonObj.shapesection]);for(var i=0,len1=jsonObj.shapesection.length;i<len1;i++){val=this._round(jsonObj.shapesection[i].shapepercentage),0==val&&num++,overall+=val,sub=jsonObj.shapesection[i].shapesubsection,sub instanceof Array||(jsonObj.shapesection[i].shapesubsection=[sub]),sub_overall=0,sub_num=0;for(var j=0,len2=jsonObj.shapesection[i].shapesubsection.length;j<len2;j++)val=this._round(jsonObj.shapesection[i].shapesubsection[j].sectionpercentage),0==val&&sub_num++,sub_overall+=val;jsonObj.shapesection[i].shapesubsection.auto=(1-sub_overall)/sub_num}auto=this._round((1-overall)/num),overall=360,s_val=0;i=0;for(var len=jsonObj.shapesection.length;i<len;i++){val=this._round(jsonObj.shapesection[i].shapepercentage)||auto,this.section.push({val:val,sval:this._round(s_val+=val),angle:Math.round(360*val),subsection:[]}),i==len-1?this.section[i].angle=overall:overall-=this.section[i].angle,sub=jsonObj.shapesection[i].shapesubsection;for(j=0,len2=jsonObj.shapesection[i].shapesubsection.length;j<len2;j++)val=parseFloat(jsonObj.shapesection[i].shapesubsection[j].sectionpercentage),this.section[i].subsection.push({val:val||sub.auto,color:sub[j].color,title:this.decode(sub[j].title),descr:this.decode(sub[j].details),showTitle:"false"!=jsonObj.shapesection[i].shapesubsection[j].showtitle})}this["_build_model_"+this.type]()},_round:function(str){return parseFloat(parseFloat(str).toFixed(2))},_build_model_circle:function(){for(var x1,y1,x2,y2,p,shape,rm,coef,r,xo1,yo1,xo2,yo2,xr1,yr1,xr2,yr2,rr,arr=this.section,ang1=0,ang2=0,ang3=0,i=0,len1=arr.length;i<len1;i++){ang1=ang2,ang2+=arr[i].angle,ang3=ang1+arr[i].angle/2,p=arr[i].angle>180?1:0,x1=parseInt(170*Math.cos(Math.PI*ang1/180)),y1=parseInt(170*Math.sin(Math.PI*ang1/180)),x2=parseInt(170*Math.cos(Math.PI*ang2/180)),y2=parseInt(170*Math.sin(Math.PI*ang2/180)),i==len1-1&&(x2=170,y2=0);for(var j=0,len2=arr[i].subsection.length;j<len2;j++){if(shape=arr[i].subsection[j],0==j){if(xo1=x1*(coef=shape.val),yo1=y1*coef,xo2=x2*coef,yo2=y2*coef,r=170*coef,shape.path_shape="M 0 0 L "+xo1+" "+yo1+" A "+r+" "+r+" 0 "+p+" 1 ",shape.path_text="M "+xo1/2+" "+yo1/2+" A "+r/2+" "+r/2+" 0 "+p+" 1 "+xo2/2+" "+yo2/2,xo2==xo1&&yo2==yo1){shape.path_shape+=-xo2+" "+yo2+" A "+r+" "+r+" 0 "+p+" 1 ";var xxr1=4*r/3;shape.path_text="M 0 "+xxr1/2+" L 0 "+xxr1/2+" A "+xxr1/2+" "+xxr1/2+" 0 "+p+" 1 0 "+-xxr1/2+"  A "+xxr1/2+" "+xxr1/2+" 0 "+p+" 1 0 "+xxr1/2}shape.path_shape+=xo2+" "+yo2+" Z",shape.marker=parseInt(r/2*Math.sin(Math.PI*ang3/180))+this.t.circle[1],shape.path_text_width=Math.round(2*Math.PI*(r/2)*arr[i].angle/360)}else{if(xr1=xo1+x1*(coef=arr[i].subsection[j].val),yr1=yo1+y1*coef,xr2=xo2+x2*coef,yr2=yo2+y2*coef,rr=r+170*coef,rm=r+170*coef/2,shape.path_shape="M "+xo1+" "+yo1+" L "+xr1+" "+yr1+" A "+rr+" "+rr+" 0 "+p+" 1 ",xr2==xr1&&yr2==yr1&&(shape.path_shape+=-xr2+" "+yr2+" A "+rr+" "+rr+" 0 "+p+" 1 "),shape.path_shape+=+xr2+" "+yr2+" L "+xo2+" "+yo2+" A "+r+" "+r+" 0 "+p+" 0 ",shape.path_text="M "+(xr1+xo1)/2+" "+(yr1+yo1)/2+" A "+rm+" "+rm+" 0 "+p+" 1 "+(xr2+xo2)/2+" "+(yr2+yo2)/2,xo2==xo1&&yo2==yo1){shape.path_shape+=-xo2+" "+yo2+" A "+r+" "+r+" 0 "+p+" 0 ";xxr1=rr+rm;shape.path_text="M 0 "+xxr1/2+" L "+-yo2/2+" "+xxr1/2+" A "+xxr1/2+" "+xxr1/2+" 0 "+p+" 1 0 "+-xxr1/2+"  A "+xxr1/2+" "+xxr1/2+" 0 "+p+" 1 0 "+xxr1/2}shape.path_shape+=xo1+" "+yo1+" z",shape.marker=parseInt(rm*Math.sin(Math.PI*ang3/180))+this.t.circle[1],shape.path_text_width=Math.round(2*Math.PI*rm*arr[i].angle/360),r=rr,xo1=xr1,yo1=yr1,xo2=xr2,yo2=yr2}shape.dx=parseInt(15*Math.cos(Math.PI*ang3/180)),shape.dy=parseInt(15*Math.sin(Math.PI*ang3/180))}}},_build_model_pyramid:function(){for(var val_b,val_t,section,medial,xt1,yt1,xt2,yt2,sx,sy,arr=this.section,xb1=0,xb2=340,yb1=yb2=430,i=arr.length;i--;){val_h=430*arr[i].val,val_b=340*arr[i].sval,xt2=(xt1=(340-(val_t=340*(arr[i].sval-arr[i].val)))/2)+val_t,yt1=yt2=yb1-val_h,section=[{x:xb1,y:yb1},{x:xb2,y:yb2},{x:xt2,y:yt2}],xt1!=xt2&&section.push({x:xt1,y:yt1}),sx=xb1,sy=yb1;for(var j=0,len2=arr[i].subsection.length;j<len2;j++){var shape,v=(shape=arr[i].subsection[j]).val,intersection=$.intersection(section,[{x:sx,y:sy},{x:sx+val_b*v,y:sy},{x:sx+val_b*v,y:sy-val_h},{x:sx,y:sy-val_h}]);shape.path_shape=this._buid_path(intersection),shape.marker=intersection.mid("y"),medial=this._build_medial(intersection,shape.marker),shape.path_text=medial[0],shape.path_text_width=medial[1],shape.marker=this._marker(shape.marker),1==len2?(shape.dx=0,shape.dy=-10):0==j?(shape.dx=-10,shape.dy=0):j==len2-1?(shape.dx=10,shape.dy=0):(shape.dx=0,shape.dy=-10),sx+=val_b*v}xb1=xt1,xb2=xt2,yb1=yb2=yt1}},_buid_path:function(arr){for(var path="M "+arr[0].x+" "+arr[0].y,i=1,l=arr.length;i<l;i++)path+=" L "+arr[i].x+" "+arr[i].y;return path+"Z"},_build_medial:function(arr,mid){var line=[{x:0,y:mid},{x:500,y:mid}];return["M "+(mid=$.intersection(arr,line).slice(0,2).sort(function(a,b){return a.x-b.x}))[0].x+" "+mid[0].y+" L "+mid[1].x+" "+mid[1].y,Math.round(mid[1].x-mid[0].x)]},_marker:function(num){return Math.min(this.marker.max,Math.max(this.marker.min,num))}}),SCPTModel("iPane",{},{init:function(jsonObj,params){this.params=params,this.current=0,this._ready=!1,this._super(jsonObj,params,"tabbedpane"),this.orient=jsonObj.tablocation.match(/left|right/)?"vertical":"horizontal",this.stretch=params.stretch;var images=[],self=(this.orient,this);jsonObj.tab instanceof Array||(jsonObj.tab=[jsonObj.tab]);for(var i=0,len=jsonObj.tab.length;i<len;i++)jsonObj.tab[i].label=this.decode(jsonObj.tab[i].label),jsonObj.tab[i].content=this.decode(jsonObj.tab[i].content),jsonObj.tab[i].image&&jsonObj.tab[i].image.image+""!="[object Object]"?(jsonObj.tab[i].image.image=this.decode(jsonObj.tab[i].image.image,"+"),images.push($(jsonObj.tab[i].image.image).attr("src"))):images.push("");i=0;var n=0;for(len=jsonObj.tab.length;i<len;i++)if(""!=images[i]){var img=new Image;img.src=images[i],img.onload=function(obj){return function(){obj.img_h=parseInt(this.height),obj.img_w=parseInt(this.width),obj.image=obj.image.image,++n==len&&(self._ready=!0)}}(jsonObj.tab[i]),img.onerror=function(id,link){return function(){$("#"+id).find(".page td").first().append('<p class="error"># error: not found image: '+link+"</p>")}}(this.containerId,images[i])}else jsonObj.tab[i].image="",++n==len&&(self._ready=!0)}}),SCPTModel("iQuestion",{},{init:function(jsonObj,params){this.params=params,this.current=0,this._super(jsonObj,params,"didyouknow"),this.answer=this.decode(jsonObj.answer),this.button=this.decode(jsonObj.reveallabel),this.question=this.decode(jsonObj.question.question),this.img_1=jsonObj.question.primaryicon.image+""!="[object Object]"?this.decode(jsonObj.question.primaryicon.image,"+"):"",this.img_2=jsonObj.question.secondaryicon.image+""!="[object Object]"?this.decode(jsonObj.question.secondaryicon.image,"+"):"",this.height=params.height?Math.max(200,params.height):"100%",this.width=Math.max(600,params.width)}});var labelingModelOptions={defaults:{img:"",labels:[],startCoords:[]}};SCPTModel("Labeling",labelingModelOptions,{init:function(jsonObj,params){this._super(jsonObj,params,"labeling"),this.img=jsonObj.image,this.labels=jsonObj.labelset.length?jsonObj.labelset:[jsonObj.labelset];for(var i=0;i<this.labels.length;i++)this.labels[i].name[1]=this.decode(this.labels[i].name[1]);0==jsonObj.linecolor?this.lineColor="#000000":this.lineColor=jsonObj.linecolor||"#ff0000",this.imgPosition=[jsonObj.imagex||0,jsonObj.imagey||0],this.reinit()},reinit:function(){this._super(),this.pointsArr=[];for(var i=0;i<this.labels.length;i++)this.pointsArr.push(-2);this.randArrs={}},setState:function(jsonObj){this._super(jsonObj),this.pointsArr=jsonObj.innerState},getState:function(jsonObj){var obj=this._super();return obj.innerState=this.pointsArr,obj}});var orderingModelOptions={defaults:{img:"",labels:[],startCoords:[]}};SCPTModel("Ordering",orderingModelOptions,{init:function(jsonObj,params){console.log("model init"),this._super(jsonObj,params,"ordering"),this.orderset=jsonObj.orderset;for(var i=0;i<this.orderset.length;i++)this.orderset[i].item=this.decode(this.orderset[i].item);this.reinit()},reinit:function(){console.log("model reinit"),this._super(),this.pointsArr=[];for(var i=0;i<this.orderset.length;i++)this.pointsArr.push(-2)},setState:function(jsonObj){console.log("model setState"),this._super(jsonObj),this.pointsArr=jsonObj.innerState},getState:function(jsonObj){console.log("model getState");var obj=this._super();return obj.innerState=this.pointsArr,obj}}),SCPTModel("Puzzle",{},{init:function(jsonObj,params){Kinetic;this._super(jsonObj,params,"jigsawpuzzle"),this.maxScore=parseInt(jsonObj.score)||0,this.reinit(),this.cols=parseInt(Math.min(Math.max(jsonObj.columns,2),20)),this.rows=parseInt(Math.min(Math.max(jsonObj.rows,2),20));var paramStr=jsonObj.puzzleimage.image.replace(/%3D/gi,"=").replace(/%2F/gi,"/").replace(/%22/gi,'"');this.image=paramStr.match(/src="[^\"]*"/gi)[0].replace(/src=/gi,"").replace(/"/gi,""),this.wwidth=paramStr.match(/width="[^\"]*"/gi)[0].replace(/width=/gi,"").replace(/"/gi,""),this.hheight=paramStr.match(/height="[^\"]*"/gi)[0].replace(/height=/gi,"").replace(/"/gi,""),this.resizeSizes(),this.toph=180-this.hheight/2,this.scoreText=jsonObj.scorelabel||this.scoreText||"Score",this.restartText=this.decode(jsonObj.restartbuttonlabel)||this.restartText||"Restart",this.finishText=jsonObj.finishbuttonlabel||this.finishText||"Finish",this.paper=null,this.board=null,this.pieces=[],this.pieces.s=this.maxScore/(this.cols*this.rows),this.pieces.w=this.wwidth/this.cols,this.pieces.h=this.hheight/this.rows,this.pieces.current=-1,this.cnv_id=this.containerId+"-cnv",this.holder=$('<div class="sc-pz-puzzleHolder" style="background-color:'+this.backgroundColor+'"></div>'),this.canbox=$('<div class="sc-pz-puzzleCanBox" id="'+this.cnv_id+'"></div>').css({"background-color":this.backgroundColor}),this.w_load=$('<img src="res/puzzle/loading.gif"/>').css({position:"relative",opasity:"0.3",top:"-300px",left:"300px"})},reinit:function(){this.currentScore=0,this.tcurrentScore=0,this._super()},next:function(){this.pieces[this.arr[this.pieces.current]].highlight=!1,++this.pieces.current==this.pieces.length&&(this.pieces.current=0),this.pieces[this.arr[this.pieces.current]].highlight=!0,this.pieces[this.arr[this.pieces.current]].shape.moveToTop(),this.pieces.layer.draw()},score:function(){for(var result=0,i=this.pieces.length;i--;)this.pieces[i].shape._right&&(result+=this.pieces.s);return Math.min(result,this.params.score)},reset:function(){this.attempts++;for(var _pcs=this.pieces,gatex=270-_pcs.w,miny=_pcs.l,gatey=this.hheight-_pcs.h-2*_pcs.l,i=this.pieces.length;i--;){var x=Math.round(Math.random()*gatex+400)-_pcs[i].ox,y=Math.round(Math.random()*gatey+miny)-_pcs[i].oy;_pcs[i].shape.setPosition(x,y),_pcs[i].shape.draggable(!0)}this.pieces.layer.draw()},load_state:function(obj){for(var state=obj.split(";").reverse(),i=this.pieces.length;i--;){var p=state[i].split(",");this.pieces[i].shape.setPosition(parseInt(p[0]),parseInt(p[1])),"0"==p[0]&&"0"==p[1]?this.pieces[i].shape._right=!0:(this.pieces[i].shape._right=!1,this.pieces[i].shape.draggable(!0))}this.pieces.layer.draw()},unhighlight:function(){for(var i=this.pieces.length;i--;)this.pieces[i].highlight=!1;this.pieces.layer.draw()},setState:function(jsonObj){this._super(jsonObj),this.load_state(jsonObj.innerState)},getState:function(jsonObj){for(var obj=this._super(),state="",i=this.pieces.length;i--;){var p=this.pieces[i].shape.getPosition();state+=state?";":"",state+=p.x+","+p.y}return obj.innerState=state,obj},resizeSizes:function(){var w=this.wwidth,h=this.hheight;(w>350||h>350)&&(w>h?(h=350*h/w,w=350):(w=350*w/h,h=350)),this.wwidth=w,this.hheight=h}}),SCPTModel("SeekAWord",{},{init:function(jsonObj,params){params.isXML||(jsonObj=this.parseStringToXML(jsonObj)),this._super(jsonObj,params,"seekaword"),this.pointsArr=new Array(jsonObj.words.length),this.words=jsonObj.words,this.size=params.sqrsize,this.instructions=params.instructions||"",this.isHint=params.hint+""!="false"||!1,this.state=[],this.paper=null,this.sheetSize=400,this.cellSize=373/this.size,this.keyboard={prevCell:[1,1],activeCell:[1,1],isStarted:!1,startLine:!0},this.line={},this.reinit()},reinit:function(){this._super();for(var i=0;i<this.pointsArr.length;i++)this.pointsArr[i]=0;this.state=[],this.seekAWordSheet=new createSeekAWordSheet(this.size,this.size,this.words),this.state=this.seekAWordSheet.letter_grid,this.line={x:[],y:[],cells:[]}},setState:function(jsonObj){this._super(jsonObj),this.state=jsonObj.state,this.pointsArr=jsonObj.pointsArr},getState:function(jsonObj){var obj=this._super();return obj.pointsArr=this.pointsArr,obj.state=this.state,obj},parseStringToXML:function(str){for(var retObj={},params=str.split("&"),i=1;i<params.length-1;i++){var pair=params[i].split("=");if("words"==pair[0].substring(0,5)){for(var arr=pair[1].split("|"),j=0;j<arr.length;j++)arr[j]=this.decode(arr[j]+"").toUpperCase();retObj.words=arr}else retObj[pair[0]]=pair[1]}return retObj}});var sortingModelOptions={defaults:{img:"",labels:[],startCoords:[]}};SCPTModel("Sorting",sortingModelOptions,{init:function(jsonObj,params){this._super(jsonObj,params,"sorting"),this.cards=jsonObj.card.length?jsonObj.card:[jsonObj.card];for(var i=0;i<this.cards.length;i++)this.cards[i].text=this.decode(this.cards[i].text),this.cards[i].title=this.decode(this.cards[i].title),this.cards[i].title2=this.decode(this.cards[i].title2);this.reinit(),this.sortLabels=[];for(i=1;i<6;i++)jsonObj["cat"+i]&&this.sortLabels.push(this.decode(jsonObj["cat"+i]+""))},reinit:function(){this._super(),this.pointsArr=[],this.selectedObject=-1,this.currentZIndex=1;for(var i=0;i<this.cards.length;i++)this.pointsArr.push(-2)},setState:function(jsonObj){this._super(jsonObj),this.pointsArr=jsonObj.innerState},getState:function(jsonObj){var obj=this._super();return obj.innerState=this.pointsArr,obj}});var timelineModelOptions={defaults:{}};SCPTModel("Timeline",timelineModelOptions,{init:function(jsonObj,params){this._super(jsonObj,params,"timeline"),this.title=this.decode(jsonObj.title),this.closeTxt=jsonObj.closetxt,this.ordermethod=jsonObj.ordermethod,this.startTime=this.getMsDate(jsonObj.startmonth+"/"+jsonObj.startday+"/"+jsonObj.startyear),this.endTime=this.getMsDate(jsonObj.endmonth+"/"+jsonObj.endday+"/"+jsonObj.endyear),this.startYear=jsonObj.startyear,this.endYear=jsonObj.endyear,this.intervals=jsonObj.intervals,this.visualContainers=[],this.events=jsonObj.event.length?jsonObj.event:[jsonObj.event],this.createStructure(this.events),this.partWidth=this.calculateWidth()},createStructure:function(events){if("numbered"==this.ordermethod){this.visualContainers[0]="";for(var i=0;i<events.length;i++)events[i].visPosition=events[i].date,events[i].visWidth=0,this.visualContainers.push(events[i].date)}else{var partMsWidth=365*this.intervals*24*36e5;for(i=0;i<events.length;i++)events[i].visPosition=(this.getMsDate(events[i].date+"")-this.startTime)/partMsWidth,events[i].visWidth=0,events[i].end+""!="[object Object]"&&(events[i].visWidth=(this.getMsDate(events[i].end+"")-this.getMsDate(events[i].date+""))/partMsWidth);for(var startYear=this.startYear,endYear=this.endYear;startYear<endYear;)this.visualContainers.push(startYear),startYear+=this.intervals}for(i=0;i<events.length;i++)events[i].title=this.decode(events[i].title||""),events[i].content=this.decode(events[i].content||"");this.events=events,this.calculateWidth()},setState:function(jsonObj){this._super(jsonObj)},getState:function(jsonObj){return this._super()},getMsDate:function(date){var arr=date.split("/");return new Date(arr[2],arr[0],arr[1]).getTime()},calculateWidth:function(){minWidth=260,rows=3,timeLineWidth=this.events.length*minWidth,strip_mc_imelinestrip_mc_width=timeLineWidth/rows;var _loc2=new Array;for(x=0;x<this.events.length;x++){setDate=this.events[x].date.toString(),my_array=setDate.toString().split("/");var _loc3=new Date(my_array[2],my_array[0]-1,my_array[1]);"date"==this.ordermethod&&_loc3.setFullYear(my_array[2]),percentage=Math.abs((this.startTime-_loc3.valueOf())/(this.endTime-this.startTime)),_loc2[x]=strip_mc_imelinestrip_mc_width*percentage}for(x=0;x<this.events.length;x++)Math.abs(_loc2[x]-_loc2[x+2])<minWidth&&(minWidth=Math.abs(_loc2[x]-_loc2[x+2]));return strip_mc_imelinestrip_mc_width=timeLineWidth/rows*(minWidth/minWidth),numOfIntervals=(parseInt(this.endYear)-parseInt(this.startYear))/parseInt(this.intervals),Math.max(strip_mc_imelinestrip_mc_width/numOfIntervals,50)}});
